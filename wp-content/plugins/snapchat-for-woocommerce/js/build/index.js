(()=>{"use strict";var e,t,n={790:e=>{e.exports=window.ReactJSXRuntime},1455:e=>{e.exports=window.wp.apiFetch},1609:e=>{e.exports=window.React},3832:e=>{e.exports=window.wp.url},3905:(e,t,n)=>{n.d(t,{C5:()=>a,Dh:()=>r,nP:()=>o});const o=window.snapchatAdsAdminData,a={CONNECTED:"connected",DISCONNECTED:"disconnected"},r={CONNECTED:"connected",DISCONNECTED:"disconnected"}},5703:e=>{e.exports=window.wc.wcSettings},6087:e=>{e.exports=window.wp.element},6427:e=>{e.exports=window.wp.components},6473:(e,t,n)=>{n.d(t,{qX:()=>p,Rv:()=>l,Sf:()=>u,T:()=>i});var o=n(7143),a=n(8468);const r=window.wc.tracks;var c=n(3905),s=n(7162);const i=a.noop;function p(e){const{slug:t}=c.nP,{version:n,adAccountId:a}=(0,o.select)(s.U).getGeneral(),r={...e,[`${t}_version`]:n};return a&&(r[`${t}_ads_id`]=a),r}function u(e,t){(0,r.recordEvent)(e,p(t))}function l(e,t){(0,r.queueRecordEvent)(e,p(t))}},6476:e=>{e.exports=window.wc.navigation},6520:(e,t,n)=>{n.d(t,{RV:()=>a,Ui:()=>o,mY:()=>r});const o="wc/sfw",a="/wc/sfw",r="core/notices"},7143:e=>{e.exports=window.wp.data},7162:(e,t,n)=>{n.d(t,{U:()=>i.Ui,j:()=>L});var o={};n.r(o),n.d(o,{disconnectSnapchatAccount:()=>A,fetchSetup:()=>T,fetchSnapchatAccount:()=>S,receiveJetpackAccount:()=>m,receiveSettings:()=>C,receiveSetup:()=>_,receiveSnapchatAccount:()=>f,receiveSnapchatAccountDetails:()=>g,receiveTrackConversionsStatus:()=>E,updateSettings:()=>w});var a={};n.r(a),n.d(a,{getGeneral:()=>y,getJetpackAccount:()=>N,getSettings:()=>O,getSetup:()=>v,getSnapchatAccount:()=>b,getSnapchatAccountDetails:()=>I});var r={};n.r(r),n.d(r,{getJetpackAccount:()=>P,getSettings:()=>x,getSetup:()=>V,getSnapchatAccount:()=>R,getSnapchatAccountDetails:()=>U});var c=n(7143),s=n(3905),i=n(6520),p=n(7723),u=n(1455),l=n.n(u);function d(e,t,n){if(401!==e?.statusCode){const o=function(e,t,n){const o=[],a=e?.message;return t&&o.push(t),a&&"string"==typeof a?o.push(a):n&&o.push(n),0===o.length&&o.push((0,p.__)("Unknown error occurred.","snapchat-for-woocommerce")),o.join((0,p._x)(" ","The spacing between sentences. It's a space in English. Please use an empty string if no spacing is needed in that language.","snapchat-for-woocommerce"))}(e,t,n);(0,c.dispatch)(i.mY).createNotice("error",o)}console.error(e)}const h={RECEIVE_ACCOUNTS_JETPACK:"RECEIVE_ACCOUNTS_JETPACK",RECEIVE_SNAPCHAT_ACCOUNT:"RECEIVE_SNAPCHAT_ACCOUNT",RECEIVE_SNAPCHAT_ACCOUNT_DETAILS:"RECEIVE_SNAPCHAT_ACCOUNT_DETAILS",RECEIVE_TRACK_CONVERSIONS_STATUS:"RECEIVE_TRACK_CONVERSIONS_STATUS",RECEIVE_SETUP:"RECEIVE_SETUP",RECEIVE_SETTINGS:"RECEIVE_SETTINGS",DISCONNECT_ACCOUNTS_SNAPCHAT:"DISCONNECT_ACCOUNTS_SNAPCHAT",DISCONNECT_ACCOUNTS_ALL:"DISCONNECT_ACCOUNTS_ALL"};function m(e){return{type:h.RECEIVE_ACCOUNTS_JETPACK,account:e}}function f(e){return{type:h.RECEIVE_SNAPCHAT_ACCOUNT,snapchatAccount:e}}function E(e){return{type:h.RECEIVE_TRACK_CONVERSIONS_STATUS,status:e}}function _(e){return{type:h.RECEIVE_SETUP,setup:e}}function C(e){return{type:h.RECEIVE_SETTINGS,settings:e}}function g(e){return{type:h.RECEIVE_SNAPCHAT_ACCOUNT_DETAILS,snapchatAccountDetails:e}}async function w(e){try{const t=await l()({path:`${i.RV}/snapchat/settings`,method:"POST",data:{capi_enabled:e.capiEnabled,collect_pii:e.collectPii}});return C({capiEnabled:Boolean(t.capi_enabled),collectPii:Boolean(t.collect_pii),triggerExport:Boolean(t.trigger_export),lastExportTimeStamp:t.last_export_timestamp,exportFileUrl:t.export_file_url})}catch(e){throw d(e,(0,p.__)("There was an error updating the settings.","snapchat-for-woocommerce")),e}}async function S(){try{const e=await l()({path:`${i.RV}/snapchat/connection`});(0,c.dispatch)(i.Ui).receiveSnapchatAccount(e)}catch(e){d(e,(0,p.__)("There was an error loading Snapchat account info.","snapchat-for-woocommerce"))}}async function T(){try{const e=await l()({path:`${i.RV}/snapchat/setup`});(0,c.dispatch)(i.Ui).receiveSetup(e)}catch(e){d(e,(0,p.__)("There was an error loading Snapchat setup.","snapchat-for-woocommerce"))}}async function A(e=!1){try{return await l()({path:`${i.RV}/snapchat/connection`,method:"DELETE"}),{type:h.DISCONNECT_ACCOUNTS_SNAPCHAT,invalidateRelatedState:e}}catch(e){throw d(e,(0,p.__)("Unable to disconnect your Snapchat account.","snapchat-for-woocommerce")),e}}const v=e=>e.setup,N=e=>e.accounts.jetpack,b=e=>e.accounts.snapchat,y=e=>e.general,I=e=>e.snapchat,O=e=>e.settings;function P(){return async function({dispatch:e}){try{e(m(await l()({path:`${i.RV}/jetpack/connected`})))}catch(e){d(e,(0,p.__)("There was an error loading Jetpack account info.","snapchat-for-woocommerce"))}}}function R(){return S}function U(){return async function({dispatch:e}){try{e(g(await l()({path:`${i.RV}/snapchat/account`})))}catch(e){d(e,(0,p.__)("There was an error loading Snapchat account details info.","snapchat-for-woocommerce"))}}}function x(){return async function({dispatch:e}){try{const t=await l()({path:`${i.RV}/snapchat/settings`});e(C({capiEnabled:Boolean(t.capi_enabled),collectPii:Boolean(t.collect_pii),triggerExport:Boolean(t.trigger_export),lastExportTimeStamp:t.last_export_timestamp,exportFileUrl:t.export_file_url}))}catch(e){d(e,(0,p.__)("There was an error fetching settings.","snapchat-for-woocommerce"))}}}function V(){return T}var k=n(8468);function D(e,t,n){return function(e,t=""){const n=Object.assign(e.constructor(),e),o=e=>null==e?{}:(0,k.clone)(e);return{setIn(e,a){const r=(e=>t?Array.isArray(t)||Array.isArray(e)?[].concat(t,e):`${t}.${e}`:e)(e);return(0,k.setWith)(n,r,a,o),this},end:()=>n}}(e).setIn(t,n).end()}const j=(0,c.createReduxStore)(i.Ui,{actions:o,selectors:a,resolvers:r,reducer:(e,t)=>{switch(t.type){case h.RECEIVE_ACCOUNTS_JETPACK:{const{account:n}=t;return D(e,"accounts.jetpack",n)}case h.RECEIVE_SETUP:{const{setup:n}=t;return D(e,"setup",n)}case h.RECEIVE_SNAPCHAT_ACCOUNT:{const{snapchatAccount:n}=t;return D(e,"accounts.snapchat",n)}case h.RECEIVE_SNAPCHAT_ACCOUNT_DETAILS:{const{snapchatAccountDetails:n}=t;return D(e,"snapchat",n)}case h.DISCONNECT_ACCOUNTS_SNAPCHAT:return D(e,"accounts.snapchat",null);case h.RECEIVE_SETTINGS:{const{settings:n}=t;return D(e,"settings",n)}case h.DISCONNECT_ACCOUNTS_ALL:default:return e}},initialState:{general:{version:s.nP.pluginVersion,adAccountId:s.nP.adAccountId},setup:{status:s.nP.status,step:s.nP.step},accounts:{jetpack:null,snapchat:null},snapchat:null,settings:{capiEnabled:!1,collectPii:!0,triggerExport:!1,lastExportTimeStamp:"",exportFileUrl:""}}});(0,c.register)(j);const L=()=>(0,c.useDispatch)(i.Ui)},7723:e=>{e.exports=window.wp.i18n},8468:e=>{e.exports=window.lodash},8846:e=>{e.exports=window.wc.components}},o={};function a(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e](r,r.exports,a),r.exports}a.m=n,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,n)=>(a.f[n](e,t),t),[])),a.u=e=>({207:"get-started-page",223:"commons",352:"onboarding",472:"settings"}[e]+".js?ver="+{207:"dd28af6dd94cd7e7cfae",223:"2c49a44dff67e815f1d7",352:"b44c93c3f7ac41effb6b",472:"1e0e847f8ffc27511c69"}[e]),a.miniCssF=e=>({352:"onboarding",472:"settings"}[e]+".css?ver="+{352:"b44c93c3f7ac41effb6b",472:"1e0e847f8ffc27511c69"}[e]),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="snapchat-for-woocommerce:",a.l=(n,o,r,c)=>{if(e[n])e[n].push(o);else{var s,i;if(void 0!==r)for(var p=document.getElementsByTagName("script"),u=0;u<p.length;u++){var l=p[u];if(l.getAttribute("src")==n||l.getAttribute("data-webpack")==t+r){s=l;break}}s||(i=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+r),s.src=n),e[n]=[o];var d=(t,o)=>{s.onerror=s.onload=null,clearTimeout(h);var a=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach(e=>e(o)),t)return t(o)},h=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),i&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{if("undefined"!=typeof document){var e={57:0};a.f.miniCss=(t,n)=>{e[t]?n.push(e[t]):0!==e[t]&&{352:1,472:1}[t]&&n.push(e[t]=(e=>new Promise((t,n)=>{var o=a.miniCssF(e),r=a.p+o;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var a=(c=n[o]).getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(a===e||a===t))return c}var r=document.getElementsByTagName("style");for(o=0;o<r.length;o++){var c;if((a=(c=r[o]).getAttribute("data-href"))===e||a===t)return c}})(o,r))return t();((e,t,n,o,r)=>{var c=document.createElement("link");c.rel="stylesheet",c.type="text/css",a.nc&&(c.nonce=a.nc),c.onerror=c.onload=n=>{if(c.onerror=c.onload=null,"load"===n.type)o();else{var a=n&&n.type,s=n&&n.target&&n.target.href||t,i=new Error("Loading CSS chunk "+e+" failed.\n("+a+": "+s+")");i.name="ChunkLoadError",i.code="CSS_CHUNK_LOAD_FAILED",i.type=a,i.request=s,c.parentNode&&c.parentNode.removeChild(c),r(i)}},c.href=t,document.head.appendChild(c)})(e,r,0,t,n)}))(t).then(()=>{e[t]=0},n=>{throw delete e[t],n}))}}})(),(()=>{var e={57:0};a.f.j=(t,n)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((n,a)=>o=e[t]=[n,a]);n.push(o[2]=r);var c=a.p+a.u(t),s=new Error;a.l(c,n=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),c=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+c+")",s.name="ChunkLoadError",s.type=r,s.request=c,o[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var o,r,[c,s,i]=n,p=0;if(c.some(t=>0!==e[t])){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);i&&i(a)}for(t&&t(n);p<c.length;p++)r=c[p],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=globalThis.webpackChunksnapchat_for_woocommerce=globalThis.webpackChunksnapchat_for_woocommerce||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var r=a(7723),c=a(6087);const s=window.wp.hooks;var i=a(5703);a(7162);const p=window.wp.compose;var u=a(790);const l=(0,p.createHigherOrderComponent)(e=>t=>(0,u.jsx)("div",{className:"sfw-admin-page",children:(0,u.jsx)(e,{...t})}),"withAdminPageShell");var d=a(6473);const h=(0,c.lazy)(()=>Promise.all([a.e(223),a.e(207)]).then(a.bind(a,9484))),m=(0,c.lazy)(()=>Promise.all([a.e(223),a.e(352)]).then(a.bind(a,8481))),f=(0,c.lazy)(()=>Promise.all([a.e(223),a.e(472)]).then(a.bind(a,8052))),E=new Set,_=(0,i.getSetting)("admin")?.woocommerceTranslation||(0,r.__)("WooCommerce","snapchat-for-woocommerce"),C="woocommerce_admin_pages_list";let g=!1;const w=()=>{(0,s.addFilter)(C,"woocommerce/snapchat-for-woo/add-page-routes",e=>{const t=[["",_],["/marketing",(0,r.__)("Marketing","snapchat-for-woocommerce")],(0,r.__)("Snapchat for WooCommerce","snapchat-for-woocommerce")],n=[{breadcrumbs:[...t],container:h,path:"/snapchat/start",wpOpenMenu:"toplevel_page_woocommerce-marketing"},{breadcrumbs:[...t,(0,r.__)("Setup Snapchat","snapchat-for-woocommerce")],container:m,path:"/snapchat/setup"},{breadcrumbs:[...t,(0,r.__)("Settings","snapchat-for-woocommerce")],container:f,path:"/snapchat/settings",wpOpenMenu:"toplevel_page_woocommerce-marketing"}];return n.forEach(e=>{e.container=l(e.container);const t=e.path.substring(1).replace(/\//g,"_");E.add(t)}),g=!0,e.concat(n)})},S=()=>(0,s.hasAction)("hookAdded",`woocommerce/woocommerce/watch_${C}`);if((0,s.didFilter)(C)>0&&!S()&&!g){const e=Date.now(),t=setInterval(()=>{if(S())return clearInterval(t),void w();Date.now()-e>3e3&&clearInterval(t)},10)}else w();(0,s.addFilter)("woocommerce_tracks_client_event_properties","woocommerce/snapchat-for-woo/add-base-event-properties-to-page-view",(e,t)=>"wcadmin_page_view"===t&&E.has(e.path)?(0,d.qX)(e):e)})();