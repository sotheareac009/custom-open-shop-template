"use strict";(globalThis.webpackChunksnapchat_for_woocommerce=globalThis.webpackChunksnapchat_for_woocommerce||[]).push([[223],{14:(e,s,t)=>{t.d(s,{A:()=>a});var c=t(6087);const n={match:{url:"/snapchat/start"},wpOpenMenu:"toplevel_page_woocommerce-marketing"};function a(){return(0,c.useEffect)(()=>{window.wpNavMenuClassChange(n,n.match.url)})}},873:(e,s,t)=>{t.d(s,{A:()=>o});var c=t(7143),n=t(6520);const a="getSettings",o=()=>(0,c.useSelect)(e=>{const s=e(n.Ui),t=s[a]();return{capiEnabled:t.capiEnabled,collectPii:t.collectPii,shouldTriggerExport:t.triggerExport,lastExportTimeStamp:t.lastExportTimeStamp,exportFileUrl:t.exportFileUrl,hasFinishedResolution:s.hasFinishedResolution(a,[])}},[])},1968:(e,s,t)=>{t.d(s,{A:()=>n});var c=t(5703);const n=()=>(0,c.getSetting)("adminUrl")},2224:(e,s,t)=>{t.d(s,{A:()=>a});var c=t(8468),n=t(6087);const a=e=>{const s=(0,n.useRef)(e);return(0,c.isEqual)(s.current,e)||(s.current=e),s.current}},2465:(e,s,t)=>{t.d(s,{A:()=>u});var c=t(7723),n=t(6087),a=t(6427),o=t(3905),r=t(8846),i=t(6473),l=t(790);const d=e=>{const{eventName:s,eventProps:t,onClick:c=()=>{},...n}=e;return(0,l.jsx)(r.Link,{...n,onClick:e=>{s&&(0,i.Sf)(s,t),c(e)}})},p=e=>{const{context:s,linkId:t,href:c,...n}=e;return(0,l.jsx)(d,{eventProps:{context:s,link_id:t,href:c},type:"external",target:"_blank",href:c,...n,eventName:"sfw_documentation_link_click"})},u=()=>{const{isLegacyPluginActive:e}=o.nP;return e?(0,l.jsx)(a.Notice,{status:"warning",isDismissible:!1,children:(0,n.createInterpolateElement)((0,c.__)("You currently have two Snapchat plugins installed. Having both plugins active can cause reporting issues. Please uninstall the 'Snapchat Pixel for WooCommerce' (Legacy Plugin) by following the steps <link>here</link>.","snapchat-for-woocommerce"),{link:(0,l.jsx)(p,{context:"legacy-plugin-active-notice",linkId:"legacy-plugin-active-notice",href:"https://woocommerce.com/document/snapchat-for-woocommerce/#section-4"})})}):null}},2482:(e,s,t)=>{t.d(s,{x:()=>p,A:()=>_});var c=t(7723),n=t(6942),a=t.n(n),o=t(8242),r=t(8771);const i=t.p+"images/js/src/images/logo/snapchat.svg",l=t.p+"images/js/src/images/logo/wp.svg";var d=t(790);const p={EMPTY:"empty",WPCOM:"wpcom",SNAPCHAT:"snapchat"},u=(0,d.jsx)("img",{src:i,alt:(0,c.__)("Snapchat Logo","snapchat-for-woocommerce"),width:"40",height:"40"}),h=(0,d.jsx)("img",{src:l,alt:(0,c.__)("WordPress.com Logo","snapchat-for-woocommerce"),width:"40",height:"40"}),m={[p.EMPTY]:{},[p.WPCOM]:{icon:h,title:"WordPress.com"},[p.SNAPCHAT]:{icon:u,title:(0,c.__)("Snapchat","snapchat-for-woocommerce")}},f={center:!1,top:"sfw-account-card__styled--align-top"},w={...f,toDetail:"sfw-account-card__indicator--align-to-detail"};function _({className:e,disabled:s=!1,appearance:t=p.EMPTY,icon:c=m[t].icon,title:n=m[t].title,description:i=m[t].description,helper:l,alignIcon:u="center",indicator:h,alignIndicator:_="center",detail:x,expandedDetail:g=!1,actions:j,children:v,...A}){const N=a()("sfw-account-card",!!s&&"sfw-account-card--is-disabled",!!g&&"sfw-account-card--is-expanded-detail",e),b=a()("sfw-account-card__icon",f[u]),y=a()("sfw-account-card__indicator",w[_]);return(0,d.jsxs)(o.A.Card,{className:N,...A,children:[(0,d.jsx)(o.A.Card.Body,{children:(0,d.jsxs)("div",{className:"sfw-account-card__body-layout",children:[c&&(0,d.jsx)("div",{className:b,children:c}),(0,d.jsxs)("div",{className:"sfw-account-card__subject",children:[n&&(0,d.jsx)(r.A.Title,{className:"sfw-account-card__title",children:n}),i&&(0,d.jsx)("div",{className:"sfw-account-card__description",children:i}),l&&(0,d.jsx)("div",{className:"sfw-account-card__helper",children:l})]}),x&&(0,d.jsx)("div",{className:"sfw-account-card__detail",children:x}),h&&(0,d.jsx)("div",{className:y,children:h}),j&&(0,d.jsx)("div",{className:"sfw-account-card__actions",children:j})]})}),v]})}},3164:(e,s,t)=>{t.d(s,{A:()=>n});var c=t(790);const n=e=>{const{className:s="",title:t,description:n}=e;return(0,c.jsxs)("header",{className:`sfw-step-content-header ${s}`,children:[(0,c.jsx)("h1",{children:t}),(0,c.jsx)("div",{className:"sfw-step-content-header__description",children:n})]})}},3666:(e,s,t)=>{t.d(s,{FN:()=>a,xP:()=>n});var c=t(6476);const n=()=>(0,c.getNewPath)(null,"/snapchat/setup",null),a=()=>(0,c.getNewPath)(null,"/snapchat/settings",null)},3704:(e,s,t)=>{t.d(s,{A:()=>n});var c=t(790);const n=e=>{const{className:s="",...t}=e;return(0,c.jsx)("div",{className:`sfw-step-content-actions ${s}`,...t})}},3741:(e,s,t)=>{t.d(s,{A:()=>o});var c=t(8846),n=t(7723),a=t(790);const o=()=>(0,a.jsx)("div",{className:"sfw-app-spinner",role:"status","aria-label":(0,n.__)("Loadingâ€¦","snapchat-for-woocommerce"),children:(0,a.jsx)(c.Spinner,{})})},4566:(e,s,t)=>{t.d(s,{A:()=>l});var c=t(6942),n=t.n(c),a=t(7723),o=t(6427),r=t(4848),i=t(790);const l=e=>{const{className:s}=e;return(0,i.jsxs)(o.Flex,{className:n()("sfw-connected-icon-label",s),align:"center",gap:1,children:[(0,i.jsx)(o.FlexItem,{children:(0,i.jsx)(r.A,{})}),(0,i.jsx)(o.FlexItem,{children:(0,a.__)("Connected","snapchat-for-woocommerce")})]})}},4790:(e,s,t)=>{t.d(s,{Ay:()=>w});var c=t(7723);function n(e){return"yes"!==e.active?"":"yes"===e.owner?e.email:(0,c.__)("Successfully connected through Jetpack","snapchat-for-woocommerce")}var a=t(2482),o=t(4566),r=t(790);const i=({jetpack:e})=>(0,r.jsx)(a.A,{appearance:a.x.WPCOM,description:n(e),indicator:(0,r.jsx)(o.A,{})});var l=t(3832),d=t(3905),p=t(6520),u=t(7892),h=t(5640),m=t(6599);const f=()=>{const{createNotice:e}=(0,h.A)(),s=d.nP?.setupComplete?"reconnect":"setup-snapchat",t={next_page_name:s},n=(0,l.addQueryArgs)(`${p.RV}/jetpack/connect`,t),[o,{loading:i,data:f}]=(0,m.A)({path:n});return(0,r.jsx)(a.A,{appearance:a.x.WPCOM,description:(0,c.__)("Required to connect with Snapchat","snapchat-for-woocommerce"),indicator:(0,r.jsx)(u.A,{isSecondary:!0,loading:i||f,eventName:"sfw_wordpress_account_connect_button_click",eventProps:{context:s},onClick:async()=>{try{const e=await o();window.location.href=e.url}catch(s){e("error",(0,c.__)("Unable to connect your WordPress.com account. Please try again later.","snapchat-for-woocommerce"))}},children:(0,c.__)("Connect","snapchat-for-woocommerce")})})},w=({jetpack:e})=>"yes"===e.active?(0,r.jsx)(i,{jetpack:e}):(0,r.jsx)(f,{})},5640:(e,s,t)=>{t.d(s,{A:()=>n});var c=t(7143);const n=()=>(0,c.useDispatch)("core/notices")},5659:(e,s,t)=>{t.d(s,{A:()=>u});var c=t(7723),n=t(6427),a=t(6476),o=t(7892),r=t(9457);const i=t.p+"images/js/src/images/logo/woocommerce.svg",l=t.p+"images/js/src/images/logo/snapchat-wide.svg";var d=t(3666),p=t(790);const u=()=>{const e=()=>{(0,a.getHistory)().replace((0,d.FN)())};return(0,p.jsxs)(r.A,{className:"sfw-onboarding-success-modal",onRequestClose:e,buttons:[(0,p.jsx)(o.A,{variant:"secondary",onClick:e,children:(0,c.__)("Close","snapchat-for-woocommerce")},"close")],children:[(0,p.jsx)("div",{className:"sfw-onboarding-success-modal__logos",children:(0,p.jsxs)(n.Flex,{gap:6,align:"center",justify:"center",children:[(0,p.jsx)(n.FlexItem,{children:(0,p.jsx)("img",{src:i,alt:(0,c.__)("WooCommerce Logo","snapchat-for-woocommerce"),width:"187.5"})}),(0,p.jsx)(n.FlexItem,{className:"sfw-onboarding-success-modal__logo-separator-line"}),(0,p.jsx)(n.FlexItem,{children:(0,p.jsx)("img",{src:l,alt:(0,c.__)("Snapchat Logo","snapchat-for-woocommerce"),width:"123"})})]})}),(0,p.jsxs)("div",{className:"sfw-onboarding-success-modal__content",children:[(0,p.jsx)("h2",{className:"sfw-onboarding-success-modal__title",children:(0,c.__)("Youâ€™ve successfully set up Snapchat for WooCommerce! ðŸŽ‰","snapchat-for-woocommerce")}),(0,p.jsx)("div",{className:"sfw-onboarding-success-modal__description",children:(0,c.__)("Your store is now connected to Snapchat. You can start running ads, track performance, and reach Snapchat users with your WooCommerce products.","snapchat-for-woocommerce")})]})]})}},6028:(e,s,t)=>{t.d(s,{A:()=>o});var c=t(3741),n=t(8242),a=t(790);const o=()=>(0,a.jsx)(n.A.Card,{children:(0,a.jsx)(n.A.Card.Body,{children:(0,a.jsx)(c.A,{})})})},6474:(e,s,t)=>{t.d(s,{A:()=>a});var c=t(6087);const n={"full-page":["woocommerce-admin-full-screen","is-wp-toolbar-disabled","sfw-full-page"],"full-content":["sfw-full-content"]};function a(e){(0,c.useEffect)(()=>{if(!n.hasOwnProperty(e))return;const s=document.body.classList,t=n[e].filter(e=>!s.contains(e));return s.add(...t),()=>{s.remove(...t)}},[e])}},6599:(e,s,t)=>{t.d(s,{A:()=>m});var c=t(6087),n=t(1455),a=t.n(n),o=t(2224);const r="START",i="FINISH",l="ERROR",d="RESET",p={loading:!1,error:void 0,data:void 0,response:void 0,options:void 0},u=(e,s)=>{switch(s.type){case r:return{...e,loading:!0,options:s.options};case i:return{...e,loading:!1,data:s.data,response:s.response,options:s.options};case l:return{...e,loading:!1,error:s.error,response:s.response,options:s.options};case d:return s.state}},h=e=>{const{parse:s=!0}=e;return s},m=(e,s=p)=>{const t=(0,o.A)(e),n={...p,...s},[m,f]=(0,c.useReducer)(u,n);return[(0,c.useCallback)(async e=>{const s={...t,...e};f({type:r,options:s});try{const e=await a()({...s,parse:!1}),t=e.clone(),c=t.json&&await t.json();return f({type:i,data:c,response:e,options:s}),h(s)?c:e}catch(e){if("fetch_error"===e.code)throw f({type:l,error:e,response:void 0,options:s}),e;const t=e;let c;try{const e=t.clone();c=e.json?await e.json():new Error("No content body in fetch response.")}catch(e){c=new Error("Error parsing response.")}throw f({type:l,error:c,response:t,options:s}),h(s)?c:t}},[t]),{...m,reset:e=>{f({type:d,state:{...n,...e}})}}]}},7401:(e,s,t)=>{t.d(s,{A:()=>o});var c=t(7143),n=t(6520);const a="getJetpackAccount",o=()=>(0,c.useSelect)(e=>{const s=e(n.Ui);return{jetpack:s[a](),hasFinishedResolution:s.hasFinishedResolution(a,[])}},[])},7539:(e,s,t)=>{t.d(s,{A:()=>o});var c=t(8846),n=t(8687),a=t(790);const o=({title:e,backHref:s,helpButton:t,onBackButtonClick:o})=>(0,a.jsxs)("div",{className:"sfw-stepper-top-bar",children:[(0,a.jsx)(c.Link,{className:"components-button sfw-stepper-top-bar__back-button",href:s,type:"wc-admin",onClick:o,children:(0,a.jsx)(n.A,{})}),(0,a.jsx)("span",{className:"sfw-stepper-top-bar__title",children:e}),t]})},7792:(e,s,t)=>{t.d(s,{A:()=>a});var c=t(9031),n=t(790);const a=({size:e=18})=>(0,n.jsx)(c.A,{className:"sfw-warning-icon",size:e})},7892:(e,s,t)=>{t.d(s,{A:()=>l});var c=t(6427),n=t(8846),a=t(6942),o=t.n(a),r=t(6473),i=t(790);const l=e=>{const{className:s,disabled:t,loading:a,eventName:l,eventProps:d,text:p,onClick:u=()=>{},...h}=e,m=t||a,f=["sfw-app-button",s];let w;return a&&(w=(0,i.jsx)(n.Spinner,{})),p&&(w=(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(n.Spinner,{}),p]}),h.icon&&f.push("sfw-app-button--icon-with-text"),"right"===h.iconPosition&&f.push("sfw-app-button--icon-position-right")),(0,i.jsx)(c.Button,{className:o()(...f),disabled:m,"aria-disabled":m,text:w,onClick:(...e)=>{l&&(0,r.Sf)(l,d),u(...e)},...h})}},7952:(e,s,t)=>{t.d(s,{A:()=>i});var c=t(7143),n=t(6087),a=t(6520),o=t(7162),r=t(2224);const i=()=>((e,...s)=>{const{invalidateResolution:t}=(0,o.j)(),i=(0,r.A)(s),l=(0,n.useCallback)(()=>{t(e,i)},[t,e,i]);return(0,c.useSelect)(s=>{const{isResolving:t,hasFinishedResolution:c}=s(a.Ui),n=s(a.Ui)[e](...i);return{isResolving:t(e,i),hasFinishedResolution:c(e,i),data:n,invalidateResolution:l}},[l,e,i])})("getSetup")},8242:(e,s,t)=>{t.d(s,{A:()=>d});var c=t(6942),n=t.n(c),a=t(6427),o=t(790);var r=t(8771);const i=({size:e="",...s})=>(0,o.jsx)(a.Card,{...s,size:e});i.Body=e=>{const{className:s,...t}=e;return(0,o.jsx)(a.CardBody,{className:n()("sfw-section-card-body",s),...t})},i.Footer=e=>{const{children:s,...t}=e;return(0,o.jsx)(a.CardFooter,{className:"sfw-section-card-footer",...t,children:s})},i.Title=e=>{const{className:s,...t}=e;return(0,o.jsx)(r.A.Title,{className:n()("sfw-section-card-title",s),...t})};const l=({className:e,title:s,description:t,topContent:c,children:r,disabled:i,disabledLeft:l,verticalGap:d=6})=>{const p=n()("sfw-section",!!i&&"sfw-section--is-disabled",!!l&&"sfw-section--is-disabled-left",e);return(0,o.jsxs)("section",{className:p,children:[(c||s||t)&&(0,o.jsxs)("header",{className:"sfw-section__header",children:[c&&(0,o.jsx)("p",{children:c}),s&&(0,o.jsx)("h1",{children:s}),t]}),(0,o.jsx)(a.Flex,{className:"sfw-section__body",direction:"column",gap:d,children:r})]})};l.Card=i;const d=l},8523:(e,s,t)=>{t.d(s,{A:()=>i});var c=t(7143),n=t(6520),a=t(3905),o=t(7952);const r="getSnapchatAccount",i=()=>{const{data:e}=(0,o.A)(),s=e?.status===a.Dh.CONNECTED;return(0,c.useSelect)(e=>{const t=e(n.Ui),c=t[r]();return{status:c?.status,isConnected:c?.status===a.C5.CONNECTED&&s,hasFinishedResolution:t.hasFinishedResolution(r,[])}},[s])}},8771:(e,s,t)=>{t.d(s,{A:()=>r});var c=t(6942),n=t.n(c),a=t(790);const o=e=>{const{className:s="",...t}=e;return(0,a.jsx)("div",{className:`sfw-subsection ${s}`,...t})};o.Title=e=>{const{className:s,...t}=e;return(0,a.jsx)("div",{className:n()("sfw-subsection-title",s),...t})},o.Subtitle=e=>{const{className:s,...t}=e;return(0,a.jsx)("div",{className:n()("sfw-subsection-subtitle",s),...t})},o.Body=e=>{const{children:s}=e;return(0,a.jsx)("div",{className:"sfw-subsection-body",children:s})},o.HelperText=e=>{const{className:s,children:t}=e;return(0,a.jsx)("div",{className:n()("sfw-subsection-helper-text",s),children:t})};const r=o},9180:(e,s,t)=>{t.d(s,{A:()=>r});var c=t(7723),n=t(4236),a=t(7892),o=t(790);const r=({eventContext:e})=>(0,o.jsxs)(a.A,{className:"sfw-help-icon-button",href:"https://woocommerce.com/document/snapchat-for-woocommerce/",target:"_blank",eventName:"sfw_help_click",eventProps:{context:e},children:[(0,o.jsx)(n.A,{}),(0,c.__)("Help","snapchat-for-woocommerce")]})},9370:(e,s,t)=>{t.d(s,{A:()=>n});var c=t(790);const n=e=>{const{className:s="",children:t,...n}=e;return(0,c.jsx)("div",{className:`sfw-step-content ${s}`,...n,children:(0,c.jsx)("div",{className:"sfw-step-content__container",children:t})})}},9457:(e,s,t)=>{t.d(s,{A:()=>i});var c=t(6427),n=t(6942),a=t.n(n),o=t(790);const r={auto:!1,visible:"swf-app-modal__styled--overflow-visible"},i=({className:e,overflow:s="auto",buttons:t=[],children:n,...i})=>{const l=a()("sfw-admin-page","sfw-app-modal",r[s],e);return(0,o.jsxs)(c.Modal,{className:l,...i,children:[n,t.length>=1&&(0,o.jsx)("div",{className:"sfw-app-modal__footer",children:t})]})}},9826:(e,s,t)=>{t.d(s,{A:()=>a});var c=t(8242),n=t(790);const a=({children:e})=>(0,n.jsx)(c.A,{className:"sfw-step-content-footer",verticalGap:10,children:e})},9956:(e,s,t)=>{t.d(s,{L4:()=>j,Ay:()=>y});var c=t(6476),n=t(8523),a=t(7723),o=t(7143),r=t(6087),i=t(7162),l=t(6520);const d="getSnapchatAccountDetails";var p=t(790);const u=()=>{const{org_name:e,ad_acc_id:s,ad_acc_name:t,pixel_id:c}=(()=>{const e=(0,i.j)(),s=(0,r.useCallback)(()=>{e.invalidateResolution(d,[])},[e]);return(0,o.useSelect)(e=>{const t=e(l.Ui);return{...t[d](),refetchSnapchatAccountDetails:s,hasFinishedResolution:t.hasFinishedResolution(d,[])}},[s])})();return(0,p.jsxs)("div",{className:"sfw-snapchat-account-details",children:[e&&(0,p.jsxs)("p",{children:[(0,a.__)("Organization:","snapchat-for-woocommerce")," ",e]}),s&&t&&(0,p.jsxs)("p",{children:[(0,a.__)("Ads Account:","snapchat-for-woocommerce")," ",t," (",s,")"]}),c&&(0,p.jsxs)("p",{children:[(0,a.__)("Pixel ID:","snapchat-for-woocommerce")," ",c]})]})};var h=t(7892),m=t(3832),f=t(6599),w=t(5640);const _=({text:e=(0,a.__)("Or, connect to a different Snapchat account","snapchat-for-woocommerce"),...s})=>{const[t,{loading:c}]=(()=>{const{createNotice:e,removeNotice:s}=(0,w.A)(),{disconnectSnapchatAccount:t}=(0,i.j)(),[c,n]=(0,r.useState)(!1),[o,{loading:d,data:p}]=function(e){const s=(0,r.useMemo)(()=>{const s={next_page_name:e};return{path:(0,m.addQueryArgs)(`${l.RV}/snapchat/connect`,s)}},[e]);return(0,f.A)(s)}("setup-snapchat");return[async()=>{const{notice:c}=await e("info",(0,a.__)("Connecting to a different Snapchat account, please waitâ€¦","snapchat-for-woocommerce"));n(!0);try{await t();const{url:e}=await o();e&&(window.location.href=e)}catch(t){s(c.id),e("error",(0,a.__)("Unable to connect to a different Snapchat account. Please try again later.","snapchat-for-woocommerce"))}finally{n(!1)}},{loading:c||d||p}]})();return(0,p.jsx)(h.A,{isLink:!0,disabled:c,text:e,eventName:"sfw_snapchat_account_connect_different_account_button_click",onClick:t,...s})};var x=t(2482),g=t(4566);const j=({hideAccountSwitch:e=!1,children:s})=>(0,p.jsx)(x.A,{appearance:x.x.SNAPCHAT,description:(0,p.jsx)(u,{}),indicator:(0,p.jsx)(g.A,{}),actions:e?null:(0,p.jsx)(_,{isTertiary:!0}),children:s});var v=t(3905),A=t(3666);const N=(e,s)=>{const{createNotice:t}=(0,w.A)(),{fetchSnapchatAccount:n,fetchSetup:a}=(0,i.j)(),[o,d]=(0,r.useState)(!1),[p]=(0,f.A)({path:`${l.RV}/snapchat/config`,method:"POST",data:{id:e,products_token:s}});return{upsertSnapchatConfig:(0,r.useCallback)(async()=>{if(!e||!s)return!1;d(!0);try{await p({parse:!1})}catch(e){t("error",e.message)}await n(),await a(),(0,c.getHistory)().replace((0,A.xP)()),d(!1)},[t,p,n,a,e,s]),loading:o}},b=({disabled:e,configId:s,productsToken:t})=>{const{createNotice:c}=(0,w.A)(),{upsertSnapchatConfig:n,loading:o}=N(s,t),i=v.nP?.setupComplete?"reconnect":"setup-snapchat",d={next_page_name:i},u=(0,m.addQueryArgs)(`${l.RV}/snapchat/connect`,d),[_,{loading:g,data:j}]=(0,f.A)({path:u});(0,r.useEffect)(()=>{s&&n(s)},[s,t,n]);return(0,p.jsx)(x.A,{appearance:x.x.SNAPCHAT,disabled:e,description:(0,a.__)("Connect your Snapchat Business Account to sync your catalog and run Dynamic Ads.","snapchat-for-woocommerce"),indicator:o?(0,p.jsx)(h.A,{loading:!0,text:(0,a.__)("Connectingâ€¦","snapchat-for-woocommerce")}):(0,p.jsx)(h.A,{isSecondary:!0,disabled:e,loading:g||j,eventName:"sfw_snapchat_account_connect_button_click",eventProps:{context:i},onClick:async()=>{try{const e=await _();window.location.href=e.url}catch(e){c("error",(0,a.__)("Unable to connect your Snapchat account. Please try again later.","snapchat-for-woocommerce"))}},children:(0,a.__)("Connect","snapchat-for-woocommerce")})})},y=({disabled:e=!1})=>{const{isConnected:s}=(0,n.A)(),{config_id:t,products_token:a}=(0,c.getQuery)();return s?(0,p.jsx)(j,{}):(0,p.jsx)(b,{disabled:e,configId:t,productsToken:a})}}}]);