(()=>{"use strict";var e={4744:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===r}(e)}(e)},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function o(e,t,r){return e.concat(t).map(function(e){return n(e,r)})}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function c(e,r,u){(u=u||{}).arrayMerge=u.arrayMerge||o,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=n;var s=Array.isArray(r);return s===Array.isArray(e)?s?u.arrayMerge(e,r,u):function(e,t,r){var o={};return r.isMergeableObject(e)&&i(e).forEach(function(t){o[t]=n(e[t],r)}),i(t).forEach(function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&r.isMergeableObject(t[i])?o[i]=function(e,t){if(!t.customMerge)return c;var r=t.customMerge(e);return"function"==typeof r?r:c}(i,r)(e[i],t[i],r):o[i]=n(t[i],r))}),o}(e,r,u):n(r,u)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,r){return c(e,r,t)},{})};var u=c;e.exports=u}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n="ppcp-gateway",o="ppcp-credit-card-gateway",i="#place_order",a=function(){var e=document.querySelector('input[name="payment_method"]:checked');return e?e.value:null};function c(e,t){void 0===t&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(e){r.setAttribute(e,t[e]),"data-csp-nonce"===e&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function u(e,t){if(void 0===t&&(t=Promise),l(e,t),"undefined"==typeof document)return t.resolve(null);var r=function(e){var t,r,n=e.sdkBaseUrl,o=e.environment,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["sdkBaseUrl","environment"]),a=n||function(e){return"sandbox"===e?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}(o),c=i,u=Object.keys(c).filter(function(e){return void 0!==c[e]&&null!==c[e]&&""!==c[e]}).reduce(function(e,t){var r,n=c[t].toString();return r=function(e,t){return(t?"-":"")+e.toLowerCase()},"data"===(t=t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,r)).substring(0,4)||"crossorigin"===t?e.attributes[t]=n:e.queryParams[t]=n,e},{queryParams:{},attributes:{}}),s=u.queryParams,l=u.attributes;return s["merchant-id"]&&-1!==s["merchant-id"].indexOf(",")&&(l["data-merchant-id"]=s["merchant-id"],s["merchant-id"]="*"),{url:"".concat(a,"?").concat((t=s,r="",Object.keys(t).forEach(function(e){0!==r.length&&(r+="&"),r+=e+"="+t[e]}),r)),attributes:l}}(e),n=r.url,o=r.attributes,i=o["data-namespace"]||"paypal",a=s(i);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),function(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(null===r)return null;var n=c(e,t),o=r.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(n.dataset).length)return null;var i=!0;return Object.keys(o.dataset).forEach(function(e){o.dataset[e]!==n.dataset[e]&&(i=!1)}),i?r:null}(n,o)&&a?t.resolve(a):function(e,t){void 0===t&&(t=Promise),l(e,t);var r=e.url,n=e.attributes;if("string"!=typeof r||0===r.length)throw new Error("Invalid url.");if(void 0!==n&&"object"!=typeof n)throw new Error("Expected attributes to be an object.");return new t(function(e,t){if("undefined"==typeof document)return e();!function(e){var t=e.onSuccess,r=e.onError,n=c(e.url,e.attributes);n.onerror=r,n.onload=t,document.head.insertBefore(n,document.head.firstElementChild)}({url:r,attributes:n,onSuccess:function(){return e()},onError:function(){var e=new Error('The script "'.concat(r,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return t(e)}})})}({url:n,attributes:o},t).then(function(){var e=s(i);if(e)return e;throw new Error("The window.".concat(i," global variable is not available."))})}function s(e){return window[e]}function l(e,t){if("object"!=typeof e||null===e)throw new Error("Expected an options object.");var r=e.environment;if(r&&"production"!==r&&"sandbox"!==r)throw new Error('The `environment` option must be either "production" or "sandbox".');if(void 0!==t&&"function"!=typeof t)throw new Error("Expected PromisePonyfill to be a function.")}"function"==typeof SuppressedError&&SuppressedError;const f=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;fetch(t.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({nonce:t.nonce})}).then(function(e){return e.json()}).then(function(o){var i;(function(e,t){return!(!e||e.user!==t||(new Date).getTime()>=1e3*e.expiration)})(o,t.user)&&(i=o,sessionStorage.setItem("ppcp-data-client-id",JSON.stringify(i)),e["data-client-token"]=o.token,u(e).then(function(e){"function"==typeof r&&r(e)}).catch(function(e){"function"==typeof n&&n(e)}))})};function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==t);u=!0);}catch(e){s=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=v(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var _n=0,n=function(){};return{s:n,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw o}}}}function v(e,t){if(e){if("string"==typeof e)return m(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=p(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var g=function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.paypal=null,this.buttons=new Map,this.messages=new Map,this.renderEventName="ppcp-render",document.ppcpWidgetBuilderStatus=function(){console.log({buttons:t.buttons,messages:t.messages})},jQuery(document).off(this.renderEventName).on(this.renderEventName,function(){t.renderAll()})},(t=[{key:"setPaypal",value:function(e){this.paypal=e,jQuery(document).trigger("ppcp-paypal-loaded",e)}},{key:"registerButtons",value:function(e,t){e=this.sanitizeWrapper(e),this.buttons.set(this.toKey(e),{wrapper:e,options:t})}},{key:"renderButtons",value:function(e){e=this.sanitizeWrapper(e);var t=this.toKey(e);if(this.buttons.has(t)&&!this.hasRendered(e)){var r=this.buttons.get(t),n=this.paypal.Buttons(r.options);if(n.isEligible()){var o=this.buildWrapperTarget(e);o&&(n.hasReturned()?n.resume():n.render(o))}else this.buttons.delete(t)}}},{key:"renderAllButtons",value:function(){var e,t=y(this.buttons);try{for(t.s();!(e=t.n()).done;){var r=d(e.value,1)[0];this.renderButtons(r)}}catch(e){t.e(e)}finally{t.f()}}},{key:"registerMessages",value:function(e,t){this.messages.set(e,{wrapper:e,options:t})}},{key:"renderMessages",value:function(e){var t=this;if(this.messages.has(e)){var r=this.messages.get(e);if(this.hasRendered(e))document.querySelector(e).setAttribute("data-pp-amount",r.options.amount);else{var n=this.paypal.Messages(r.options);n.render(r.wrapper),setTimeout(function(){t.hasRendered(e)||n.render(r.wrapper)},100)}}}},{key:"renderAllMessages",value:function(){var e,t=y(this.messages);try{for(t.s();!(e=t.n()).done;){var r=d(e.value,2),n=r[0];r[1],this.renderMessages(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"renderAll",value:function(){this.renderAllButtons(),this.renderAllMessages()}},{key:"hasRendered",value:function(e){var t=e;if(Array.isArray(e)){t=e[0];var r,n=y(e.slice(1));try{for(n.s();!(r=n.n()).done;)t+=" .item-"+r.value}catch(e){n.e(e)}finally{n.f()}}var o=document.querySelector(t);return o&&o.hasChildNodes()}},{key:"sanitizeWrapper",value:function(e){return Array.isArray(e)&&1===(e=e.filter(function(e){return!!e})).length&&(e=e[0]),e}},{key:"buildWrapperTarget",value:function(e){var t=e;if(Array.isArray(e)){var r=jQuery(e[0]);if(!r.length)return;var n="item-"+e[1],o=r.find("."+n);o.length||(o=jQuery('<div class="'.concat(n,'"></div>')),r.append(o)),t=o.get(0)}return jQuery(t).length?t:null}},{key:"toKey",value:function(e){return Array.isArray(e)?JSON.stringify(e):e}}])&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();window.widgetBuilder=window.widgetBuilder||new g;const w=window.widgetBuilder;var _=r(4744),j=r.n(_),O=function(e){return e.replace(/([-_]\w)/g,function(e){return e[1].toUpperCase()})},S=function(e){var t=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[O(r)]=e[r]);return t}(e.url_params);e.script_attributes&&(t=j()(t,e.script_attributes));var r=function(e){var t,r,n=null==e||null===(t=e.save_payment_methods)||void 0===t?void 0:t.id_token;return n&&!0===(null==e||null===(r=e.user)||void 0===r?void 0:r.is_logged)?{"data-user-id-token":n}:{}}(e);return j().all([t,r])};function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach(function(t){T(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(e,t,r){return(t=function(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return A(s,"_invoke",function(r,n,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,u=e,p.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,p.v=n,p.n=i[1]):d<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,c=0))}if(o||r>1)return a;throw f=!0,n}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,y),c=l,u=y;(t=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,c=1,u=t}finally{s=1}}return{value:t,done:f}}}(r,o,i),!0),s}var a={};function c(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(A(t={},n,function(){return this}),t),f=s.prototype=c.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,A(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,A(f,"constructor",s),A(s,"constructor",u),u.displayName="GeneratorFunction",A(s,o,"GeneratorFunction"),A(f),A(f,o,"Generator"),A(f,n,function(){return this}),A(f,"toString",function(){return"[object Generator]"}),(x=function(){return{w:i,m:p}})()}function A(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}A=function(e,t,r,n){function i(t,r){A(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},A(e,t,r,n)}function M(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function C(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){M(i,n,o,a,c,"next",e)}function c(e){M(i,n,o,a,c,"throw",e)}a(void 0)})}}var B=new Map,F=new Map,q=function(){var e=C(x().m(function e(t,r){var n;return x().w(function(e){for(;;)switch(e.n){case 0:if(null===(n=r.data_client_id)||void 0===n||!n.set_attribute||!0===r.vault_v3_enabled){e.n=1;break}return e.a(2,new Promise(function(e,n){f(t,r.data_client_id,function(t){w.setPaypal(t),e(t)},n)}));case 1:return e.a(2,null)}},e)}));return function(_x,t){return e.apply(this,arguments)}}(),G=function(){var e=C(x().m(function e(t,r){var n,o,i;return x().w(function(e){for(;;)switch(e.n){case 0:if(t){e.n=1;break}throw new Error("Namespace is required");case 1:if(!B.has(t)){e.n=2;break}return console.log("Script already loaded for namespace: ".concat(t)),e.a(2,B.get(t));case 2:if(!F.has(t)){e.n=3;break}return console.log("Script loading in progress for namespace: ".concat(t)),e.a(2,F.get(t));case 3:return n=E(E({},S(r)),{},{"data-namespace":t}),e.n=4,q(n,r);case 4:if(!(o=e.v)){e.n=5;break}return e.a(2,o);case 5:return i=new Promise(function(e,r){u(n).then(function(r){w.setPaypal(r),B.set(t,r),console.log("Script loaded for namespace: ".concat(t)),e(r)}).catch(function(e){console.error("Failed to load script for namespace: ".concat(t),e),r(e)}).finally(function(){F.delete(t)})}),F.set(t,i),e.a(2,i)}},e)}));return function(t,r){return e.apply(this,arguments)}}();function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,D(n.key),n)}}function D(e){var t=function(e){if("object"!=I(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=I(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==I(t)?t:t+""}const H=function(){return e=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.genericErrorText=t,this.wrapper=r},t=[{key:"genericError",value:function(){this.clear(),this.message(this.genericErrorText)}},{key:"appendPreparedErrorMessageElement",value:function(e){this._getMessageContainer().replaceWith(e)}},{key:"message",value:function(e){this._addMessage(e),this._scrollToMessages()}},{key:"messages",value:function(e){var t=this;e.forEach(function(e){return t._addMessage(e)}),this._scrollToMessages()}},{key:"currentHtml",value:function(){return this._getMessageContainer().outerHTML}},{key:"_addMessage",value:function(e){if("undefined"!=typeof String&&!I(String)||0===e.length)throw new Error("A new message text must be a non-empty string.");var t=this._getMessageContainer(),r=this._prepareMessageElement(e);t.appendChild(r)}},{key:"_scrollToMessages",value:function(){jQuery.scroll_to_notices(jQuery(".woocommerce-error"))}},{key:"_getMessageContainer",value:function(){var e=document.querySelector("ul.woocommerce-error");return null===e&&((e=document.createElement("ul")).setAttribute("class","woocommerce-error"),e.setAttribute("role","alert"),jQuery(this.wrapper).prepend(e)),e}},{key:"_prepareMessageElement",value:function(e){var t=document.createElement("li");return t.innerHTML=e,t}},{key:"clear",value:function(){jQuery(".woocommerce-error, .woocommerce-message").remove()}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach(function(t){V(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function V(e,t,r){return(t=function(e){var t=function(e){if("object"!=L(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==L(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return R(s,"_invoke",function(r,n,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,u=e,p.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,p.v=n,p.n=i[1]):d<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,c=0))}if(o||r>1)return a;throw f=!0,n}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,y),c=l,u=y;(t=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,c=1,u=t}finally{s=1}}return{value:t,done:f}}}(r,o,i),!0),s}var a={};function c(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(R(t={},n,function(){return this}),t),f=s.prototype=c.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,R(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,R(f,"constructor",s),R(s,"constructor",u),u.displayName="GeneratorFunction",R(s,o,"GeneratorFunction"),R(f),R(f,o,"Generator"),R(f,n,function(){return this}),R(f,"toString",function(){return"[object Generator]"}),(W=function(){return{w:i,m:p}})()}function R(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}R=function(e,t,r,n){function i(t,r){R(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},R(e,t,r,n)}function U(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function J(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){U(i,n,o,a,c,"next",e)}function c(e){U(i,n,o,a,c,"throw",e)}a(void 0)})}}function K(_x,e){return $.apply(this,arguments)}function $(){return $=J(W().m(function e(t,r){var n,o,i,a=arguments;return W().w(function(e){for(;;)switch(e.p=e.n){case 0:return n=a.length>2&&void 0!==a[2]?a[2]:{},e.p=1,e.n=2,fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(z({nonce:r},n))});case 2:if((o=e.v).ok){e.n=3;break}throw new Error("HTTP error status: ".concat(o.status));case 3:return e.n=4,o.json();case 4:return e.a(2,e.v);case 5:throw e.p=5,i=e.v,console.error("API request failed:",i),i;case 6:return e.a(2)}},e,null,[[1,5]])})),$.apply(this,arguments)}function Z(e,t,r){return X.apply(this,arguments)}function X(){return(X=J(W().m(function e(t,r,n){var o,i;return W().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r&&n){e.n=1;break}return e.a(2,!1);case 1:return e.p=1,e.n=2,K(t.ajax.subscription_change_payment_method.endpoint,t.ajax.subscription_change_payment_method.nonce,{subscription_id:r,payment_method:a(),wc_payment_token_id:n});case 2:if(!0!==e.v.success){e.n=3;break}return o="".concat(t.view_subscriptions_page,"/").concat(r),window.location.href=o,e.a(2,!0);case 3:return e.a(2,!1);case 4:return e.p=4,i=e.v,console.error("Subscription payment change failed:",i),e.a(2,!1)}},e,null,[[1,4]])}))).apply(this,arguments)}function Y(e){e&&"string"==typeof e&&(window.location.href=e)}function ee(){var e=document.querySelector("#place_order");e?e.click():console.error("Place order button (#place_order) not found in DOM")}function te(e,t){return re.apply(this,arguments)}function re(){return re=J(W().m(function e(t,r){var n,o,i,a,c,u,s,l,f,p=arguments;return W().w(function(e){for(;;)switch(e.p=e.n){case 0:return o=(n=p.length>2&&void 0!==p[2]?p[2]:{}).paymentMethod,i=void 0===o?null:o,a=n.verificationMethod,c=void 0===a?null:a,e.p=1,s={},i&&(s.payment_method=i),c&&(s.verification_method=c),e.n=2,K(t.ajax.create_setup_token.endpoint,t.ajax.create_setup_token.nonce,s);case 2:if(l=e.v,null===(u=l.data)||void 0===u||!u.id){e.n=3;break}return e.a(2,l.data.id);case 3:throw new Error("Setup token ID not found in response");case 4:return e.p=4,f=e.v,console.error("Create vault setup token failed:",f),null==r||r.message(t.error_message),e.a(2,void 0);case 5:return e.a(2)}},e,null,[[1,4]])})),re.apply(this,arguments)}function ne(e,t,r){return oe.apply(this,arguments)}function oe(){return oe=J(W().m(function e(t,r,n){var o,i,a,c,u,s,l,f,p,d,y,v=arguments;return W().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=(o=v.length>3&&void 0!==v[3]?v[3]:{}).paymentMethod,a=void 0===i?null:i,c=o.context,u=void 0===c?null:c,s=o.isFreeTrialCart,l=void 0!==s&&s,e.p=1,f={vault_setup_token:n},a&&(f.payment_method=a),l&&(f.is_free_trial_cart=!0),e.n=2,K(t.ajax.create_payment_token.endpoint,t.ajax.create_payment_token.nonce,f);case 2:if(!0===(p=e.v).success){e.n=3;break}throw new Error("Payment token creation failed");case 3:if("checkout"!==u){e.n=4;break}return ee(),e.a(2);case 4:if(!t.is_subscription_change_payment_page){e.n=7;break}if(!(d=t.subscription_id_to_change_payment)||!p.data){e.n=6;break}return e.n=5,Z(t,d,p.data);case 5:if(!e.v){e.n=6;break}return e.a(2);case 6:return e.a(2);case 7:Y(t.payment_methods_page),e.n=9;break;case 8:e.p=8,y=e.v,console.error("Approval handling failed:",y),null==r||r.message(t.error_message);case 9:return e.a(2)}},e,null,[[1,8]])})),oe.apply(this,arguments)}function ie(e,t,r){console.error(e),null==t||t.message(r)}function ae(e,t){return{createVaultSetupToken:(n=J(W().m(function r(){return W().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,te(e,t);case 1:return r.a(2,r.v)}},r)})),function(){return n.apply(this,arguments)}),onApprove:(r=J(W().m(function r(n){var o;return W().w(function(r){for(;;)switch(r.n){case 0:return o=n.vaultSetupToken,r.n=1,ne(e,t,o);case 1:return r.a(2,r.v)}},r)})),function(e){return r.apply(this,arguments)}),onError:function(r){ie(r,t,e.error_message)}};var r,n}function ce(e,t){return{createVaultSetupToken:(n=J(W().m(function r(){return W().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,te(e,t,{paymentMethod:o,verificationMethod:e.verification_method});case 1:return r.a(2,r.v)}},r)})),function(){return n.apply(this,arguments)}),onApprove:(r=J(W().m(function r(n){var i,a,c,u,s;return W().w(function(r){for(;;)switch(r.n){case 0:return c=n.vaultSetupToken,u=null!==(i=null==e?void 0:e.is_free_trial_cart)&&void 0!==i&&i,s=null!==(a=null==e?void 0:e.context)&&void 0!==a?a:null,r.n=1,ne(e,t,c,{paymentMethod:o,context:s,isFreeTrialCart:u});case 1:return r.a(2,r.v)}},r)})),function(e){return r.apply(this,arguments)}),onError:function(r){ie(r,t,e.error_message)}};var r,n}var ue,se=function(e){return"string"==typeof e?document.querySelector(e):e},le=function(e,t,r){jQuery(document).trigger("ppcp-hidden",{handler:e,action:"hide",selector:t,element:r})},fe=function(e,t,r){jQuery(document).trigger("ppcp-shown",{handler:e,action:"show",selector:t,element:r})},pe=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=se(e);if(n){var o=n.style.getPropertyValue("display");if(t)"none"===o&&(n.style.removeProperty("display"),fe("Hiding.setVisible",e,n)),function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}(n)||(n.style.setProperty("display","block"),fe("Hiding.setVisible",e,n));else{if("none"===o)return;n.style.setProperty("display","none",r?"important":""),le("Hiding.setVisible",e,n)}}},de=function(e,t,r){var n=se(e);n&&(t?(n.classList.remove(r),fe("Hiding.setVisibleByClass",e,n)):(n.classList.add(r),le("Hiding.setVisibleByClass",e,n)))};function ye(e,t){if(t&&!t.hidden&&e){var r={style:{input:(n=t,o=["appearance","color","direction","font","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-weight","letter-spacing","line-height","opacity","outline","padding","padding-bottom","padding-left","padding-right","padding-top","text-shadow","transition","-moz-appearance","-moz-osx-font-smoothing","-moz-tap-highlight-color","-moz-transition","-webkit-appearance","-webkit-osx-font-smoothing","-webkit-tap-highlight-color","-webkit-transition"],i=window.getComputedStyle(n),a={},Object.values(i).forEach(function(e){i[e]&&o.includes(e)&&(a[e]=""+i[e])}),a)}};t.getAttribute("placeholder")&&(r.placeholder=t.getAttribute("placeholder")),e(r).render(t.parentNode),function(e){pe(e,!1,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}(t,!0),t.hidden=!0}var n,o,i,a}function ve(e){ye(e.NameField,document.getElementById("ppcp-credit-card-gateway-card-name")),ye(e.NumberField,document.getElementById("ppcp-credit-card-gateway-card-number")),ye(e.ExpiryField,document.getElementById("ppcp-credit-card-gateway-card-expiry")),ye(e.CVVField,document.getElementById("ppcp-credit-card-gateway-card-cvc"))}function me(){var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,n,o,i){var u=n&&n.prototype instanceof c?n:c,s=Object.create(u.prototype);return he(s,"_invoke",function(r,n,o){var i,c,u,s=0,l=o||[],f=!1,p={p:0,n:0,v:e,a:d,f:d.bind(e,4),d:function(t,r){return i=t,c=0,u=e,p.n=r,a}};function d(r,n){for(c=r,u=n,t=0;!f&&s&&!o&&t<l.length;t++){var o,i=l[t],d=p.p,y=i[2];r>3?(o=y===n)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=e):i[0]<=d&&((o=r<2&&d<i[1])?(c=0,p.v=n,p.n=i[1]):d<y&&(o=r<3||i[0]>n||n>y)&&(i[4]=r,i[5]=n,p.n=y,c=0))}if(o||r>1)return a;throw f=!0,n}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(f&&1===l&&d(l,y),c=l,u=y;(t=c<2?e:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(s=2,i){if(c||(o="next"),t=i[o]){if(!(t=t.call(i,u)))throw TypeError("iterator result is not an object");if(!t.done)return t;u=t.value,c<2&&(c=0)}else 1===c&&(t=i.return)&&t.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=e}else if((t=(f=p.n<0)?u:r.call(n,p))!==a)break}catch(t){i=e,c=1,u=t}finally{s=1}}return{value:t,done:f}}}(r,o,i),!0),s}var a={};function c(){}function u(){}function s(){}t=Object.getPrototypeOf;var l=[][n]?t(t([][n]())):(he(t={},n,function(){return this}),t),f=s.prototype=c.prototype=Object.create(l);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,he(e,o,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=s,he(f,"constructor",s),he(s,"constructor",u),u.displayName="GeneratorFunction",he(s,o,"GeneratorFunction"),he(f),he(f,o,"Generator"),he(f,n,function(){return this}),he(f,"toString",function(){return"[object Generator]"}),(me=function(){return{w:i,m:p}})()}function he(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}he=function(e,t,r,n){function i(t,r){he(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(i("next",0),i("throw",1),i("return",2))},he(e,t,r,n)}function be(e,t,r,n,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void r(e)}c.done?t(u):Promise.resolve(u).then(n,o)}function ge(e){var t=a(),r="#ppc-button-".concat(n,"-save-payment-method"),o=document.querySelector(r),c=e.is_subscription_change_payment_page;o?(de(i,t!==n,"ppcp-hidden"),pe(r,t===n)):de(i,!!c||t!==n,"ppcp-hidden")}function we(e){document.body.addEventListener("click",function(t){var r=t.target;(r.matches(".payment_methods input.input-radio")||"radio"===r.type&&r.closest(".payment_methods"))&&ge(e)}),document.body.addEventListener("change",function(t){var r=t.target;(r.matches(".payment_methods input.input-radio")||"radio"===r.type&&"payment_method"===r.name)&&ge(e)}),document.body.addEventListener("init_add_payment_method",function(){ge(e)}),ge(e)}function _e(_x){return je.apply(this,arguments)}function je(){var e;return e=me().m(function e(t){var r,o,i,c,u,s,l,f,p;return me().w(function(e){for(;;)switch(e.p=e.n){case 0:return t.is_subscription_change_payment_page&&(r=document.querySelector("#wc-ppcp-credit-card-gateway-new-payment-method"))&&(r.checked=!0,r.disabled=!0),(o=new H(t.labels.error.generic,document.querySelector(".woocommerce-notices-wrapper"))).clear(),e.p=1,u={url_params:{"client-id":t.client_id,"merchant-id":t.merchant_id,components:"buttons,card-fields"},save_payment_methods:{id_token:t.id_token},user:{is_logged:null!==(i=null===(c=t.user)||void 0===c?void 0:c.is_logged)&&void 0!==i&&i}},e.n=2,G("ppcp-add-payment-method",u);case 2:if(s=e.v,!document.querySelector("#ppc-button-".concat(n,"-save-payment-method"))){e.n=3;break}return e.n=3,s.Buttons(ae(t,o)).render("#ppc-button-".concat(n,"-save-payment-method"));case 3:(l=s.CardFields(ce(t,o))).isEligible()&&ve(l),null==(f=document.querySelector("#place_order"))||f.addEventListener("click",function(e){var r,n=null===(r=document.querySelector('input[name="wc-ppcp-credit-card-gateway-payment-token"]:checked'))||void 0===r?void 0:r.value;"ppcp-credit-card-gateway"!==a()||n&&"new"!==n||(f.disabled=!0,e.preventDefault(),l.submit().catch(function(e){console.error(e),o.message(t.error_message),f.disabled=!1}))}),e.n=5;break;case 4:e.p=4,p=e.v,console.error("Failed to load PayPal script:",p),o.message(t.labels.error.generic||"Failed to load PayPal. Please refresh the page.");case 5:return e.a(2)}},e,null,[[1,4]])}),je=function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){be(i,n,o,a,c,"next",e)}function c(e){be(i,n,o,a,c,"throw",e)}a(void 0)})},je.apply(this,arguments)}"undefined"!=typeof window&&window.ppcp_add_payment_method&&(ue=window.ppcp_add_payment_method,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){we(ue),_e(ue)}):(we(ue),_e(ue)))})();