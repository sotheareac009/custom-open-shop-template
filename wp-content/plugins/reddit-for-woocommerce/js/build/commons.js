"use strict";(globalThis.webpackChunkreddit_for_woocommerce=globalThis.webpackChunkreddit_for_woocommerce||[]).push([[223],{14:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(6087),s=n(9274);const r={match:{url:"/reddit/setup"},wpOpenMenu:"toplevel_page_woocommerce-marketing"},c={match:{url:"/reddit/setting"},wpOpenMenu:"toplevel_page_woocommerce-marketing"};function i(){const{currentLink:e}=(0,s.A)();return(0,o.useEffect)(()=>{if(!e)return;const t=e.getAttribute("href");let n="";"admin.php?page=wc-admin&path=%2Freddit%2Fsetup"===t?n=r.match.url:"admin.php?page=wc-admin&path=%2Freddit%2Fsettings"===t&&(n=c.match.url),window.wpNavMenuClassChange(r,n)},[e])}},679:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(5115);const s=()=>{const{pixel_id:e,hasFinishedResolution:t}=(0,o.A)();return{pixelId:e,hasConnection:!!e,hasFinishedResolution:t}}},683:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(6960),s=n(7723);const r=(e,t)=>{const n={};if("custom"!==e.level)return n;if(Number.isFinite(e.amount)&&Number.isFinite(t.dailyBudget)&&t.dailyBudget>0){const{amount:n}=e,{dailyBudget:o,formatAmount:r}=t,c=Number(o);if(n<c)return{amount:(0,s.sprintf)(/* translators: %1$s: minimum daily budget */ /* translators: %1$s: minimum daily budget */
(0,s.__)("Please make sure daily average cost is at least %s","reddit-for-woocommerce"),r(c))}}return!Number.isFinite(e.amount)||e.amount<=0?{amount:(0,s.__)("Please make sure daily average cost is greater than 0.","reddit-for-woocommerce")}:n};var c=n(7419),i=n(790);function a(e,t){return Object.defineProperty(e,"dailyBudget",{enumerable:!0,get(){return"custom"===this.level?this.amount:"current"===this.level?this.currentAmount:t[this.level].dailyBudget}})}function d(e,t,n){const o={...t,...e};return"custom"===o.level||n?.[o.level]||(o.level=n?.recommended&&"current"!==o.level?"recommended":"current"),a(o,n)}function l({initialCampaign:e,assetEntityGroup:t,countryCodes:n,currentAmount:s,...l}){const{formatAmount:u}=(0,c.A)(),m={dailyBudgetBaseline:10,recommended:{dailyBudget:65,metrics:{cost:443.1,conversions:13.1,conversionsValue:523.75},country:"US",currency:"USD"},high:{dailyBudget:85,metrics:{cost:531.72,conversions:13.5,conversionsValue:539.43},country:"US",currency:"USD"},low:{dailyBudget:45,metrics:{cost:354.48,conversions:12,conversionsValue:479.15},country:"US",currency:"USD"},recommendedDailyBudget:65,eventProps:{source:"reddit-ads-api",recommended_budget:65,metrics_availability:"all"}};return(0,i.jsx)(o.Ay,{initialValues:{...d(e,{level:"recommended",amount:m.recommendedDailyBudget},m)},validate:e=>r(e,{dailyBudget:m.dailyBudgetBaseline,formatAmount:u}),extendAdapter:()=>({budgetRecommendation:m}),...l,onChange:function(...e){const t=e?.[1];if(t&&a(t,m),l.onChange)return l.onChange.apply(this,e)}})}},873:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(7143),s=n(6520);const r="getSettings",c=()=>(0,o.useSelect)(e=>{const t=e(s.Ui),n=t[r]();return{productsToken:n.productsToken,isCapiEnabled:n.trackConversions,isCampaignCreated:n.campaignCreated,shouldTriggerExport:n.triggerExport,lastExportTimeStamp:n.lastExportTimeStamp,exportFileUrl:n.exportFileUrl,hasFinishedResolution:t.hasFinishedResolution(r,[])}},[])},1479:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(7723),s=n(6427),r=n(6476),c=n(7892),i=n(9457);const a=n.p+"images/js/src/images/logo/woocommerce.svg",d=n.p+"images/js/src/images/logo/reddit-wide.svg";var l=n(3666),u=n(790);const m=()=>{const e=()=>{(0,r.getHistory)().replace((0,l.FN)())};return(0,u.jsxs)(i.A,{className:"rfw-onboarding-success-modal",onRequestClose:e,buttons:[(0,u.jsx)(c.A,{variant:"secondary",onClick:e,children:(0,o.__)("Close","reddit-for-woocommerce")},"close")],children:[(0,u.jsx)("div",{className:"rfw-onboarding-success-modal__logos",children:(0,u.jsxs)(s.Flex,{gap:6,align:"center",justify:"center",children:[(0,u.jsx)(s.FlexItem,{children:(0,u.jsx)("img",{src:a,alt:(0,o.__)("WooCommerce Logo","reddit-for-woocommerce"),width:"187.5"})}),(0,u.jsx)(s.FlexItem,{className:"rfw-onboarding-success-modal__logo-separator-line"}),(0,u.jsx)(s.FlexItem,{children:(0,u.jsx)("img",{src:d,alt:(0,o.__)("Reddit Logo","reddit-for-woocommerce"),width:"123"})})]})}),(0,u.jsxs)("div",{className:"rfw-onboarding-success-modal__content",children:[(0,u.jsx)("h2",{className:"rfw-onboarding-success-modal__title",children:(0,o.__)("Youâ€™ve successfully set up Reddit for WooCommerce! ðŸŽ‰","reddit-for-woocommerce")}),(0,u.jsx)("div",{className:"rfw-onboarding-success-modal__description",children:(0,o.__)("Your store is now connected to Reddit. You can start running ads, track performance, and reach Reddit users with your WooCommerce products.","reddit-for-woocommerce")})]})]})}},1968:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(5703);const s=()=>(0,o.getSetting)("adminUrl")},2224:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(8468),s=n(6087);const r=e=>{const t=(0,s.useRef)(e);return(0,o.isEqual)(t.current,e)||(t.current=e),t.current}},3164:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(790);const s=e=>{const{className:t="",title:n,description:s}=e;return(0,o.jsxs)("header",{className:`rfw-step-content-header ${t}`,children:[(0,o.jsx)("h1",{children:n}),(0,o.jsx)("div",{className:"rfw-step-content-header__description",children:s})]})}},3411:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(6087),s=n(9123);function r(){const{createAdsCampaign:e}=(0,s.j)(),[t,n]=(0,o.useState)(!1);return[(0,o.useCallback)((t,o)=>(n(!0),e(t).then(e=>e.createdCampaign).then(o)),[e]),t]}},3666:(e,t,n)=>{n.d(t,{FN:()=>r,xP:()=>s});var o=n(6476);const s=()=>(0,o.getNewPath)(null,"/reddit/setup",null),r=()=>(0,o.getNewPath)(null,"/reddit/settings",null)},3704:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(790);const s=e=>{const{className:t="",...n}=e;return(0,o.jsx)("div",{className:`rfw-step-content-actions ${t}`,...n})}},3710:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(6087),s=n(3905),r=n(7952),c=n(3666),i=n(9274);const a=function(){const{data:{status:e}}=(0,r.A)(),{setupLink:t}=(0,i.A)();(0,o.useEffect)(()=>{if(!t)return;const n=(0,c.xP)(),o=(0,c.FN)(),r=s.WD.setupComplete||e===s.Dh.CONNECTED?o:n;"admin.php?page=wc-admin&path=%2Freddit%2Fsetup"===t.getAttribute("href")&&t.setAttribute("href",r)},[t])}},3741:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(8846),s=n(7723),r=n(790);const c=()=>(0,r.jsx)("div",{className:"rfw-app-spinner",role:"status","aria-label":(0,s.__)("Loadingâ€¦","reddit-for-woocommerce"),children:(0,r.jsx)(o.Spinner,{})})},3772:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(6087),s=n(3577),r=n(5703);const c=()=>{const e=(0,r.getSetting)("currency");return(0,o.useMemo)(()=>({...e,formatNumber:(t,n=e.precision)=>{const o={...e,precision:n};return(0,s.numberFormat)(o,t)}}),[e])}},3849:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(5115);const s=()=>{const{ad_account_id:e,ad_account_name:t,currency:n,symbol:s,hasFinishedResolution:r}=(0,o.A)();return{adAccountId:e,adAccountName:t,hasConnection:!!e,currency:n,symbol:s,hasFinishedResolution:r}}},3921:(e,t,n)=>{n.d(t,{A:()=>o});const o=()=>!!window.wcTracks?.isEnabled},3989:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(8556),s=n(7725),r=n(4856),c=n(4566),i=n(790);const a=({hideAccountSwitch:e=!1,children:t})=>(0,i.jsx)(r.A,{appearance:r.x.REDDIT,description:(0,i.jsx)(o.A,{}),indicator:(0,i.jsx)(c.A,{}),actions:e?null:(0,i.jsx)(s.A,{isTertiary:!0}),children:t})},4566:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(6942),s=n.n(o),r=n(7723),c=n(6427),i=n(4848),a=n(790);const d=e=>{const{className:t}=e;return(0,a.jsxs)(c.Flex,{className:s()("rfw-connected-icon-label",t),align:"center",gap:1,children:[(0,a.jsx)(c.FlexItem,{children:(0,a.jsx)(i.A,{})}),(0,a.jsx)(c.FlexItem,{children:(0,r.__)("Connected","reddit-for-woocommerce")})]})}},4790:(e,t,n)=>{n.d(t,{Ay:()=>g});var o=n(7723);function s(e){return"yes"!==e.active?"":"yes"===e.owner?e.email:(0,o.__)("Successfully connected through Jetpack","reddit-for-woocommerce")}var r=n(4856),c=n(4566),i=n(790);const a=({jetpack:e})=>(0,i.jsx)(r.A,{appearance:r.x.WPCOM,description:s(e),indicator:(0,i.jsx)(c.A,{})});var d=n(3832),l=n(3905),u=n(6520),m=n(7892),h=n(5640),f=n(6599);const p=()=>{const{createNotice:e}=(0,h.A)(),t=l.WD?.setupComplete?"reconnect":"setup-reddit",n={next_page_name:t},s=(0,d.addQueryArgs)(`${u.RV}/jetpack/connect`,n),[c,{loading:a,data:p}]=(0,f.A)({path:s});return(0,i.jsx)(r.A,{appearance:r.x.WPCOM,description:(0,o.__)("Required to connect with Reddit","reddit-for-woocommerce"),indicator:(0,i.jsx)(m.A,{isSecondary:!0,loading:a||p,eventName:"rfw_wordpress_account_connect_button_click",eventProps:{context:t},onClick:async()=>{try{const e=await c();window.location.href=e.url}catch(t){e("error",(0,o.__)("Unable to connect your WordPress.com account. Please try again later.","reddit-for-woocommerce"))}},children:(0,o.__)("Connect","reddit-for-woocommerce")})})},g=({jetpack:e})=>"yes"===e.active?(0,i.jsx)(a,{jetpack:e}):(0,i.jsx)(p,{})},4856:(e,t,n)=>{n.d(t,{x:()=>u,A:()=>w});var o=n(7723),s=n(6942),r=n.n(s),c=n(8242),i=n(8771);const a=n.p+"images/js/src/images/logo/reddit.svg",d=n.p+"images/js/src/images/logo/wp.svg";var l=n(790);const u={EMPTY:"empty",WPCOM:"wpcom",REDDIT:"reddit"},m=(0,l.jsx)("img",{src:a,alt:(0,o.__)("Reddit Logo","reddit-for-woocommerce"),width:"40",height:"40"}),h=(0,l.jsx)("img",{src:d,alt:(0,o.__)("WordPress.com Logo","reddit-for-woocommerce"),width:"40",height:"40"}),f={[u.EMPTY]:{},[u.WPCOM]:{icon:h,title:"WordPress.com"},[u.REDDIT]:{icon:m,title:(0,o.__)("Reddit","reddit-for-woocommerce")}},p={center:!1,top:"rfw-account-card__styled--align-top"},g={...p,toDetail:"rfw-account-card__indicator--align-to-detail"};function w({className:e,disabled:t=!1,appearance:n=u.EMPTY,icon:o=f[n].icon,title:s=f[n].title,description:a=f[n].description,helper:d,alignIcon:m="center",indicator:h,alignIndicator:w="center",detail:x,expandedDetail:_=!1,actions:v,children:A,...j}){const b=r()("rfw-account-card",!!t&&"rfw-account-card--is-disabled",!!_&&"rfw-account-card--is-expanded-detail",e),y=r()("rfw-account-card__icon",p[m]),C=r()("rfw-account-card__indicator",g[w]);return(0,l.jsxs)(c.A.Card,{className:b,...j,children:[(0,l.jsx)(c.A.Card.Body,{children:(0,l.jsxs)("div",{className:"rfw-account-card__body-layout",children:[o&&(0,l.jsx)("div",{className:y,children:o}),(0,l.jsxs)("div",{className:"rfw-account-card__subject",children:[s&&(0,l.jsx)(i.A.Title,{className:"rfw-account-card__title",children:s}),a&&(0,l.jsx)("div",{className:"rfw-account-card__description",children:a}),d&&(0,l.jsx)("div",{className:"rfw-account-card__helper",children:d})]}),x&&(0,l.jsx)("div",{className:"rfw-account-card__detail",children:x}),h&&(0,l.jsx)("div",{className:C,children:h}),v&&(0,l.jsx)("div",{className:"rfw-account-card__actions",children:v})]})}),A]})}},4932:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(6942),s=n.n(o),r=n(6427),c=n(790);const i=e=>{const{className:t,...n}=e,o=["rfw-app-notice",t];return(0,c.jsx)(r.Notice,{className:s()(...o),...n})}},5115:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(7143),s=n(6087),r=n(9123),c=n(6520);const i="getRedditAccountConfig",a=()=>{const e=(0,r.j)(),t=(0,s.useCallback)(()=>{e.invalidateResolution(i,[])},[e]);return(0,o.useSelect)(e=>{const n=e(c.Ui);return{...n[i](),refetchRedditAccountConfig:t,hasFinishedResolution:n.hasFinishedResolution(i,[])}},[t])}},5640:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(7143);const s=()=>(0,o.useDispatch)("core/notices")},6028:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(3741),s=n(8242),r=n(790);const c=()=>(0,r.jsx)(s.A.Card,{children:(0,r.jsx)(s.A.Card.Body,{children:(0,r.jsx)(o.A,{})})})},6474:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(6087);const s={"full-page":["woocommerce-admin-full-screen","is-wp-toolbar-disabled","rfw-full-page"],"full-content":["rfw-full-content"]};function r(e){(0,o.useEffect)(()=>{if(!s.hasOwnProperty(e))return;const t=document.body.classList,n=s[e].filter(e=>!t.contains(e));return t.add(...n),()=>{t.remove(...n)}},[e])}},6599:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(6087),s=n(1455),r=n.n(s),c=n(2224);const i="START",a="FINISH",d="ERROR",l="RESET",u={loading:!1,error:void 0,data:void 0,response:void 0,options:void 0},m=(e,t)=>{switch(t.type){case i:return{...e,loading:!0,options:t.options};case a:return{...e,loading:!1,data:t.data,response:t.response,options:t.options};case d:return{...e,loading:!1,error:t.error,response:t.response,options:t.options};case l:return t.state}},h=e=>{const{parse:t=!0}=e;return t},f=(e,t=u)=>{const n=(0,c.A)(e),s={...u,...t},[f,p]=(0,o.useReducer)(m,s);return[(0,o.useCallback)(async e=>{const t={...n,...e};p({type:i,options:t});try{const e=await r()({...t,parse:!1}),n=e.clone(),o=n.json&&await n.json();return p({type:a,data:o,response:e,options:t}),h(t)?o:e}catch(e){if("fetch_error"===e.code)throw p({type:d,error:e,response:void 0,options:t}),e;const n=e;let o;try{const e=n.clone();o=e.json?await e.json():new Error("No content body in fetch response.")}catch(e){o=new Error("Error parsing response.")}throw p({type:d,error:o,response:n,options:t}),h(t)?o:n}},[n]),{...f,reset:e=>{p({type:l,state:{...s,...e}})}}]}},6701:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(7143),s=n(6520),r=n(3905);const c="getRedditAccount",i=()=>(0,o.useSelect)(e=>{const t=e(s.Ui),n=t[c]();return{status:n?.status,email:n?.email,isConnected:n?.status===r.wH.CONNECTED,hasFinishedResolution:t.hasFinishedResolution(c,[])}},[])},6949:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(8846),s=n(6473),r=n(790);const c=e=>{const{eventName:t,eventProps:n,onClick:c=()=>{},...i}=e;return(0,r.jsx)(o.Link,{...i,onClick:e=>{t&&(0,s.VF)(t,n),c(e)}})},i=e=>{const{context:t,linkId:n,href:o,...s}=e;return(0,r.jsx)(c,{eventProps:{context:t,link_id:n,href:o},type:"external",target:"_blank",href:o,...s,eventName:"rfw_documentation_link_click"})}},6960:(e,t,n)=>{n.d(t,{Ay:()=>u,h5:()=>i});var o=n(6087),s=n(8846),r=n(8468);const c=(0,o.createContext)(null);function i(){const e=(0,o.useContext)(c);if(null===e)throw new Error("useAdaptiveFormContext was used outside of its context provider AdaptiveForm.");return e}var a=n(790);const d="submitting",l="submitted",u=(0,o.forwardRef)(function({onSubmit:e,extendAdapter:t,children:n,...i},u){const m=(0,o.useRef)(),h=(0,o.useRef)({submitter:null}),[f,p]=(0,o.useState)([]),[g,w]=(0,o.useState)(),x=(0,o.useCallback)((...e)=>{p(t=>[...t,e])},[]);(0,o.useEffect)(()=>{g&&h.current.setValueCompatibly(...g)},[g]),(0,o.useImperativeHandle)(u,()=>({setValue:x,...m.current}));const _=function(){const e=(0,o.useRef)(!1);return(0,o.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),(0,o.useCallback)(()=>e.current,[])}(),[v,A]=(0,o.useState)(0),j=(0,o.useCallback)(()=>{A(e=>e+1)},[]),b=(0,o.useCallback)(()=>{A(0)},[]),[y,C]=(0,o.useState)(null),N=y===d,k=y===l;return e&&(i.onSubmit=async function(t){C(d);let n=!1;const o={submitter:h.current.submitter,signalFailedSubmission(){n=!0}};await e.call(this,t,o),_()&&(h.current.submitter=null,C(n?null:l))}),(0,a.jsx)(s.Form,{...i,ref:m,children:({setValue:e,getInputProps:o,handleSubmit:s,...i})=>{if(h.current.setValueCompatibly=(t,n)=>{i.setValues?i.setValues({[t]:n}):e(t,n)},i.setValue=x,i.getInputProps=e=>{const t=o(e);return{...t,onChange:function(n){(function(e){return(e?.nativeEvent||e)instanceof Event})(n)&&(n="checkbox"===n.target.type?!(0,r.get)(t.values,e):n.target.value),h.current.setValueCompatibly(e,n)}}},f.length&&setTimeout(()=>w(f.shift())),i.handleSubmit=function(e){return h.current.submitter=e?.currentTarget||null,s.call(this,e)},i.adapter={isSubmitting:N,isSubmitted:k,submitter:h.current.submitter,validationRequestCount:v,requestedShowValidation:v>0,showValidation:j,hideValidation:b},"function"==typeof t){const e=t(i);Object.assign(i.adapter,e)}return(0,a.jsx)(c.Provider,{value:i,children:"function"==typeof n?n(i):n})}})})},7087:(e,t,n)=>{n.d(t,{A:()=>se});var o=n(7723),s=n(9370),r=n(3164),c=n(9826),i=n(3704),a=n(6960),d=n(6427),l=n(8846),u=n(6087),m=n(8242),h=n(8771),f=n(6942),p=n.n(f),g=n(9491),w=n(7143),x=n(6520);const _="getAdsBudgetMetrics";var v=n(7419),A=n(3772);const j=new Map;j.set("reddit-ads",function(){const e=[/[\u0000-\u04F9]/,/[\u1E00-\u20BF]/,/[\uFF61-\uFFDC]/,/[\u0E00-\u0E7F]/,/[\u2100-\u213A]/,/[\u0600-\u06FF]/,/[\u0750-\u077F]/,/[\uFB50-\uFDFF]/,/[\uFE70-\uFEFF]/,/[\u05D0-\u05EA]/,/\u05BE|\u05F3|\u05F4/],t=new Set(["à¤€","à¤","à¤‚","à¤º","à¤¼","à¥","à¥‚","à¥ƒ","à¥„","à¥…","à¥†","à¥‡","à¥ˆ","à¥","à¥‘","à¥’","à¥“","à¥”","à¥•","à¥–","à¥—","à¥¢","à¥£"]);return function(n){return n.split("").reduce((n,o)=>n+function(n){return e.some(e=>e.test(n))?1:/[\u0900-\u0D7F]/.test(n)?t.has(n)?0:1:2}(o),0)}}());var b=n(790);const y="app-input-control",C=(0,u.forwardRef)(({className:e,maxCharacterCount:t=0,kindCharacterCount:n,...s},r)=>{const c=[y,e];let i;if(t>0&&n){const e=function(e){if(j.has(e))return j.get(e);throw new Error(`The given \`kind\` of character counter is an unknown kind: ${e}`)}(n)(s.value?.trim()||"");i=(0,o.sprintf)(
// translators: 1: number of character count. 2: the maximum number of character count.
// translators: 1: number of character count. 2: the maximum number of character count.
(0,o.__)("%1$d/%2$d characters","reddit-for-woocommerce"),e,t),e>t&&c.push(`${y}--error-character-count`)}return(0,b.jsxs)("div",{className:p()(c),children:[(0,b.jsx)(d.__experimentalInputControl,{ref:r,...s}),i&&(0,b.jsx)("div",{className:"app-input-control__character-count",children:i})]})}),N=(e,t)=>{const{decimalSeparator:n}=t,o=new RegExp("[^0-9-"+n+"]",["g"]),s=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(o,"").replace(n,"."));return isNaN(s)?0:s},k=e=>({...(0,A.A)(),precision:0,...e});var R=n(3577);const F=e=>(e=>{const t=(0,A.A)();return(0,u.useMemo)(()=>{const n={...t,...e};return e=>(0,R.numberFormat)(n,e)},[t,e])})(k(e)),S=e=>{const{value:t,numberSettings:n,onChange:o=()=>{},onBlur:s=()=>{},...r}=e,c=k(n),i=F(n),[,a]=(0,u.useReducer)(e=>e+1,0),d=i(t),l=e=>{const t=N(e,c),n=i(t);return N(n,c)};return(0,b.jsx)(C,{value:d,onChange:e=>{const t=l(e);o(t),a()},onBlur:e=>{const t=l(e.target.value);s(e,t)},...r})},I=e=>{const t=(0,A.A)();return(0,b.jsx)(S,{suffix:t.code,numberSettings:t,...e})},E=function({className:e,intent:t="default",children:n,...o}){return(0,b.jsx)("span",{className:p()("rfw-badge",e,{[`is-${t}`]:t}),...o,children:(0,b.jsx)("span",{className:"rfw-badge__content",children:n})})},P=({amount:e=0,suffix:t="",compactNotation:n=!1})=>{let o=e;isNaN(e)&&(o=0);const s=o>0;let r=`${parseInt(o,10)}${String(t)}`;n&&(r=`${function(e){if("undefined"!=typeof Intl&&Intl.NumberFormat)try{return new Intl.NumberFormat("en",{notation:"compact",compactDisplay:"short"}).format(e)}catch(e){}return e>=1e6?(e/1e6).toFixed(1).replace(".0","")+"M":e>=1e3?(e/1e3).toFixed(1).replace(".0","")+"k":e.toString()}(o)}${String(t)}`),s&&(r=`+${r}`);const c=o<0;return(0,b.jsx)("span",{className:p()("rfw-delta-value",{"rfw-delta-value--negative":c,"rfw-delta-value--positive":s}),children:r})};function B(e,t=2){const n=Math.pow(10,t);return Math.round(e*n)/n}const D="_hMjQtot63fcNWMwXi05";function T({amount:e}){const t=B(e)>0?"success":"error";return(0,b.jsx)(E,{className:"v_krgHcoumFPHVz33HWX",intent:t,children:(0,b.jsx)(P,{amount:B(e),suffix:"%"})})}function M({label:e,value:t,selected:n,className:o,...s}){return(0,b.jsxs)("label",{className:"ot2v4wVGTB7zbgqyhsF3",children:[(0,b.jsx)(d.RadioControl,{...s,className:p()("W0Nvj_DCkOgNtwWsYQXa",o),checked:n===t,options:[{value:t}],hideLabelFromVision:!0,help:"","aria-label":t}),(0,b.jsx)("span",{className:p()("ENeJXDMoDgYQWC4hLtCH","custom"===t&&"t7f2xBXInWNdtUmtEt5D"),children:e})]})}function O({amount:e}){return(0,b.jsxs)(b.Fragment,{children:[e,(0,b.jsxs)("span",{className:"aTOs9c6eZIovLtvUueYk",children:["/",(0,o.__)("day","reddit-for-woocommerce")]})]})}var q=n(9031);function L({className:e,recommendedAmount:t}){return(0,b.jsxs)(d.Flex,{className:e,gap:3,children:[(0,b.jsx)(q.A,{size:24}),(0,b.jsx)(d.FlexBlock,{children:(0,u.createInterpolateElement)((0,o.__)("Your budget is lower than other advertisers' budgets, which may affect performance. For best results, we recommend at least <amount /> per day.","reddit-for-woocommerce"),{amount:(0,b.jsx)("strong",{children:t})})})]})}const U={low:(0,o.__)("Low","reddit-for-woocommerce"),high:(0,o.__)("High","reddit-for-woocommerce"),current:(0,o.__)("Current","reddit-for-woocommerce"),recommended:(0,o.__)("Recommended","reddit-for-woocommerce")};function W({formatAmount:e,metrics:t}){const n=t?.uplift&&0!==Number(t?.uplift);return(0,b.jsxs)("div",{className:"KGfrdzt78SVAfyM8E0vf",children:[(0,b.jsx)("span",{className:D,children:t?t.conversions:null}),(0,b.jsxs)("span",{className:D,children:[t?e(t.conversionsValue):null,!!n&&(0,b.jsx)(T,{amount:t.uplift})]}),(0,b.jsx)("span",{className:D,children:t?e(t.cost):null})]})}function V({hideRecommendations:e=!1}){const t=(0,a.h5)(),{adapter:n,getInputProps:s,setValue:r,values:c}=t,{budgetRecommendation:i}=n,{amount:d}=c,{adsCurrencyConfig:l,formatAmount:m}=(0,v.A)(),h=Number.isInteger(l?.precision)?l.precision:void 0,[f,A]=(0,u.useState)(d),j=(0,g.useDebounce)(A,1e3),{data:y}=function(e){return(0,w.useSelect)(t=>{if(!Number.isFinite(e)||e<=0)return{data:null,hasResolved:!0};const n=t(x.Ui),o=[e];return{data:n[_](...o),hasResolved:n.hasFinishedResolution(_,o)}},[e])}(f);(0,u.useEffect)(()=>{j(d)},[j,d]),(0,u.useEffect)(()=>{const{level:e}=c;if(!e||"custom"===e)return;let t;t="current"===e?c.currentAmount:i?.[e]?.dailyBudget;const n=Number(t);if(!Number.isFinite(n))return;const o=Number(c.amount);let s;s=!!Number.isFinite(o)&&(void 0!==h?B(o,h)===B(n,h):o===n),s||r("amount",n)},[i,h,r,c.amount,c.currentAmount,c.level]);const C=["high","recommended","low"].reduce((t,n)=>{const o=e?null:i?.[n];if(o){const e=m(o.dailyBudget);t.push({level:n,metrics:o.metrics,radioProps:{...s("level"),value:n,label:(0,b.jsx)(O,{amount:e})}})}return t},[]),{help:N,...k}=s("amount"),R=!N&&!e&&i?.recommended&&function(e,t,n){return!(!t?.low?.dailyBudget||!Number.isInteger(n))&&e<B(t.low.dailyBudget,n)}(d,i,l.precision),F=t=>{const n=t===c.level;return p()("ijG2JaomHxJYhlyrKl7g","custom"===t&&"FsdizTxqLgWeZypPHIwd",e&&"pv6iaNHzPGx215x7xyzm",n&&"ba9vbnuKrWOggLSyXrhO")};return(0,b.jsxs)("div",{className:"B9MszChLAAXOoqix9bht",children:[C.map(({level:e,radioProps:t})=>{const n="recommended"===e?"Trmh8NH4oK5nkq68t0_i":null;return(0,b.jsxs)("div",{className:F(e),children:[(0,b.jsx)(M,{...t}),(0,b.jsx)("div",{className:"N7wqiMChOg7YMz8Lw3x_",children:(0,b.jsx)("span",{className:n,children:U[e]})})]},e)}),(0,b.jsxs)("div",{className:F("custom"),children:[(0,b.jsx)(M,{...s("level"),value:"custom",label:(0,o.__)("Set custom budget","reddit-for-woocommerce")}),"custom"===c.level&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(I,{suffix:y?.currency,...k,className:p()(k.className,"p6AdFlu57UuhasQNg1To")}),(0,b.jsx)(W,{formatAmount:m,metrics:y?.metrics}),N&&(0,b.jsx)("div",{className:"nnUmKVACt0iSJgyo18HY",role:"alert",children:N}),R&&(0,b.jsx)(L,{className:"W0ljklIxeJNn6t3dLCTM",recommendedAmount:m(i.recommended.dailyBudget)})]})]})]})}const $=({children:e})=>(0,b.jsx)("div",{className:"rfw-budget-section",children:(0,b.jsxs)(m.A,{verticalGap:4,title:(0,o.__)("Set your budget","reddit-for-woocommerce"),children:[(0,b.jsx)(m.A.Card,{children:(0,b.jsxs)(m.A.Card.Body,{className:"rfw-budget-section__card-body",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.A.Title,{children:(0,o.__)("Average daily budget","reddit-for-woocommerce")}),(0,b.jsx)(h.A.Subtitle,{children:(0,o.__)("These values are based on your settings and the budgets of similar advertisers.","reddit-for-woocommerce")})]}),(0,b.jsx)(V,{}),(0,b.jsx)(d.Tip,{children:(0,u.createInterpolateElement)((0,o.__)("We recommend running campaigns at least 1 month so it can learn to optimize for your business. To run ads on Reddit, you need to have billing information set up in your Reddit Ads account. If you haven't set up billing yet, please set it up from <link>here</link> before continuing.","reddit-for-woocommerce"),{link:(0,b.jsx)(l.Link,{href:"https://ads.reddit.com/billing",target:"_blank",rel:"noopener noreferrer",type:"external"})})})]})}),e]})});var H=n(7679),z=n(5839),Y=n(9057),G=n(7677),J=n(5170);const Q=()=>(0,b.jsxs)("div",{className:"rfw-free-ad-credit",children:[(0,b.jsx)(J.A,{}),(0,b.jsx)("div",{children:(0,b.jsx)("div",{className:"rfw-free-ad-credit__description",children:(0,o.__)("New to Reddit Ads? You might be eligible for ad credits when you spend a certain amount in your first 60 days.","reddit-for-woocommerce")})})]}),X={normal:!1,medium:"rfw-vertical-gap-layout__medium",large:"rfw-vertical-gap-layout__large",overlap:"rfw-vertical-gap-layout__overlap"},K=e=>{const{className:t,size:n="normal",...o}=e;return(0,b.jsx)("div",{className:p()("rfw-vertical-gap-layout",X[n],t),...o})},Z=n.p+"images/js/src/images/logo/mobile-view.svg";function ee(){const e=[{icon:z.A,title:(0,o.__)("Feed","reddit-for-woocommerce"),description:(0,o.__)("Appear directly in Reddit's home and community feeds, blending with user-generated content.","reddit-for-woocommerce")},{icon:Y.A,title:(0,o.__)("Conversation threads","reddit-for-woocommerce"),description:(0,o.__)("Show ads within relevant discussions where people are actively engaging with topics related to your products.","reddit-for-woocommerce")},{icon:z.A,title:(0,o.__)("Explore tab","reddit-for-woocommerce"),description:(0,o.__)("Reach users browsing trending posts and communities.","reddit-for-woocommerce")}].map((e,t)=>(0,b.jsxs)("div",{className:"rfw-paid-ads-feature-list-item",children:[(0,b.jsx)("div",{className:"rfw-paid-ads-feature-list-icon",children:(0,b.jsx)(G.A,{icon:e.icon,size:24})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"rfw-paid-ads-feature-list-title",children:e.title}),(0,b.jsx)("div",{className:"rfw-paid-ads-feature-list-description",children:e.description})]})]},t));return(0,b.jsxs)("div",{className:"rfw-paid-ads-features-section__feature-info",children:[(0,b.jsx)("div",{className:"rfw-paid-ads-feature-list",children:e}),(0,b.jsx)("div",{className:"rfw-paid-ads-feature-mobile-view-image",children:(0,b.jsx)("img",{src:Z,alt:(0,o.__)("Reddit site mobile view","reddit-for-woocommerce")})})]})}function te(){return(0,b.jsx)(m.A,{className:"rfw-paid-ads-features-section",title:(0,o.__)("Ad campaign","reddit-for-woocommerce"),children:(0,b.jsx)(m.A.Card,{children:(0,b.jsxs)(m.A.Card.Body,{children:[(0,b.jsxs)("div",{className:"rfw-paid-ads-features-section__header",children:[(0,b.jsx)(m.A.Card.Title,{className:"rfw-paid-ads-section-title",children:(0,o.__)("Use Dynamic Ads to Promote Products","reddit-for-woocommerce")}),(0,b.jsx)("p",{className:"rfw-paid-ads-features-section__subtitle",children:(0,o.__)("Reddit Dynamic Ads automatically turn your product catalog into creative, delivering relevant, personalized ads across Reddit â€” including:","reddit-for-woocommerce")})]}),(0,b.jsxs)(K,{size:"large",children:[(0,b.jsx)(d.Flex,{className:"rfw-paid-ads-features-section__content",align:"center",gap:9,children:(0,b.jsx)(d.FlexBlock,{children:(0,b.jsx)(ee,{})})}),(0,b.jsx)(Q,{})]})]})})})}var ne=n(8258),oe=n(5115);function se({headerTitle:e,skipButton:t,continueButton:n}){const d=(0,a.h5)(),{catalog_id:l,hasFinishedResolution:u}=(0,oe.A)();return(0,b.jsxs)(s.A,{children:[(0,b.jsx)(r.A,{title:e,description:(0,o.__)("You're ready to launch a Reddit Ads campaign to reach your target audience across Reddit communities. Once your product catalog is synced and approved, ads will be generated and shown to relevant Reddit users.","reddit-for-woocommerce")}),(0,b.jsx)(te,{}),(0,b.jsx)($,{}),u&&!l&&(0,b.jsx)(m.A,{children:(0,b.jsx)(ne.A,{})}),(0,b.jsxs)(c.A,{children:[(0,b.jsxs)(i.A,{children:["function"==typeof t?t(d):t,"function"==typeof n?n(d):n]}),(0,b.jsx)(H.A,{})]})]})}},7401:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(7143),s=n(6520);const r="getJetpackAccount",c=()=>(0,o.useSelect)(e=>{const t=e(s.Ui);return{jetpack:t[r](),hasFinishedResolution:t.hasFinishedResolution(r,[])}},[])},7419:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(6087),s=n(4111),r=n.n(s),c=n(3772),i=n(3849);function a(){const e=(0,c.A)(),t=(0,i.A)(),n=t?.currency||"",s=t?.symbol||"",a=(0,o.useMemo)(()=>({...e,code:n,symbol:s}),[e,n,s]),d=(0,o.useMemo)(()=>r()(a).formatAmount,[a]);return{adsCurrencyConfig:a,formatAmount:d}}},7539:(e,t,n)=>{n.d(t,{A:()=>c});var o=n(8846),s=n(8687),r=n(790);const c=({title:e,backHref:t,helpButton:n,onBackButtonClick:c})=>(0,r.jsxs)("div",{className:"rfw-stepper-top-bar",children:[(0,r.jsx)(o.Link,{className:"components-button rfw-stepper-top-bar__back-button",href:t,type:"wc-admin",onClick:c,children:(0,r.jsx)(s.A,{})}),(0,r.jsx)("span",{className:"rfw-stepper-top-bar__title",children:e}),n]})},7541:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(6087),s=n(8468),r=n(2224),c=n(6473);function i(e,t){const n=(0,r.A)((0,s.pick)(t,c.E$.get(e))),[,i]=(0,o.useReducer)(e=>e+1,0);return(0,o.useEffect)(()=>{const t=`${c.CU}/${(0,s.uniqueId)()}`;return Object.keys(n).length&&c.JL.addFilter(e,t,e=>({...e,...n})),i(),()=>{c.JL.removeFilter(e,t)}},[e,n]),(0,o.useCallback)(t=>c.JL.applyFilters(e,t),[e])}},7679:(e,t,n)=>{n.d(t,{A:()=>f});var o=n(7723),s=n(6087),r=n(8846),c=n(6427),i=n(6942),a=n.n(i),d=n(6473),l=n(790);const u=(e,t,n)=>o=>{(0,d.VF)(e,{id:t,action:o?"expand":"collapse",context:n})};function m({trackName:e,faqItems:t,className:n,context:s}){return(0,l.jsx)(c.Panel,{className:a()("rfw-faqs-panel",n),header:(0,o.__)("Frequently asked questions","reddit-for-woocommerce"),children:t.map(({trackId:t,question:n,answer:o})=>(0,l.jsx)(c.PanelBody,{title:n,initialOpen:!1,onToggle:u(e,t,s),children:(0,l.jsx)(c.PanelRow,{children:o})},t))})}const h=[{trackId:"how-should-i-set-budget-and-pacing-at-launch",question:(0,o.__)("How should I set budget and pacing at launch?","reddit-for-woocommerce"),answer:(0,o.__)("Start with a weekly budget that can generate meaningful signalâ€”roughly 20â€“30Ã— your target CPA per ad groupâ€”so the system has enough data to learn. Fewer, well-funded ad groups beat a bunch of starved ones. Avoid major edits for the first 48â€“72 hours; constant changes reset learning and slow results. When you scale, do it in controlled steps (about 20â€“30% at a time) once performance is stable.","reddit-for-woocommerce")},{trackId:"how-do-i-confirm-pixel-and-capi-are-working-before-i-launch",question:(0,o.__)("How do I confirm Pixel and CAPI are working before I launch?","reddit-for-woocommerce"),answer:(0,s.createInterpolateElement)((0,o.__)("Open Events Manager and make sure the Pixel shows <strong>Active</strong> and Server events show <strong>Receiving</strong>. Trigger a quick test flow (view a product, add to cart, complete a test purchase) and confirm you see both client <strong>and</strong> server events within a few minutes, with the <strong>same event_id</strong> for deduplication. Check that match rates look healthy (hashed email/phone present) and that the <strong>product id in events exactly matches your feed id</strong>.","reddit-for-woocommerce"),{strong:(0,l.jsx)("strong",{})})},{trackId:"my-catalog-products-arent-showing-up-during-setup-what-should-i-check",question:(0,o.__)("My catalog/products aren't showing up during setupâ€”what should I check?","reddit-for-woocommerce"),answer:(0,o.__)("Run a sync and review Diagnostics for missing required fields like title, price, availability, link, and image. Only in-stock items with valid images and working links will populate eligible sets. Make sure product IDs in the feed match the IDs your Pixel/CAPI send in events; mismatches break DPA targeting and reporting. Also confirm your store currency and country align with your ad account settings.","reddit-for-woocommerce")},{trackId:"what-needs-to-be-true-for-shopping-dpas-to-work-well",question:(0,o.__)("What needs to be true for Shopping/DPAs to work well?","reddit-for-woocommerce"),answer:(0,o.__)("Your catalog must be healthy (no critical errors) and kept fresh with scheduled refresh so price and availability are current. Pixel + CAPI should fire purchase and view events reliably, with product IDs matching the feed exactly. Build product sets that mirror how you actually want to advertiseâ€”top sellers, new arrivals, or in-stock under a price pointâ€”so delivery stays relevant.Â ","reddit-for-woocommerce")},{trackId:"where-do-i-manage-the-campaign-after-creating-it-in-woo",question:(0,o.__)("Where do I manage the campaign after creating it in Woo?","reddit-for-woocommerce"),answer:(0,s.createInterpolateElement)((0,o.__)("Manage it in <strong>Reddit Ads Manager at <adsLink>https://ads.reddit.com</adsLink>.</strong>","reddit-for-woocommerce"),{strong:(0,l.jsx)("strong",{}),adsLink:(0,l.jsx)(r.Link,{href:"https://ads.reddit.com/",target:"_blank",rel:"noopener noreferrer",external:!0})})}],f=()=>(0,l.jsx)(m,{trackName:"rfw_setup_ads_faq",context:"setup-ads",faqItems:h})},7725:(e,t,n)=>{n.d(t,{A:()=>m});var o=n(7723),s=n(7892),r=n(6087),c=n(9123),i=n(3832),a=n(6520),d=n(6599),l=n(5640);var u=n(790);const m=({text:e=(0,o.__)("Or, connect to a different Reddit account","reddit-for-woocommerce"),...t})=>{const[n,{loading:m}]=(()=>{const{createNotice:e,removeNotice:t}=(0,l.A)(),{disconnectRedditAccount:n}=(0,c.j)(),[s,u]=(0,r.useState)(!1),[m,{loading:h,data:f}]=function(e){const t=(0,r.useMemo)(()=>{const t={next_page_name:e};return{path:(0,i.addQueryArgs)(`${a.RV}/reddit/connect`,t)}},[e]);return(0,d.A)(t)}("setup-reddit");return[async()=>{const{notice:s}=await e("info",(0,o.__)("Connecting to a different Reddit account, please waitâ€¦","reddit-for-woocommerce"));u(!0);try{await n();const{url:e}=await m();e&&(window.location.href=e)}catch(n){t(s.id),e("error",(0,o.__)("Unable to connect to a different Reddit account. Please try again later.","reddit-for-woocommerce"))}finally{u(!1)}},{loading:s||h||f}]})();return(0,u.jsx)(s.A,{isLink:!0,disabled:m,text:e,eventName:"rfw_reddit_account_connect_different_account_button_click",onClick:n,...t})}},7792:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(9031),s=n(790);const r=({size:e=18})=>(0,s.jsx)(o.A,{className:"rfw-warning-icon",size:e})},7892:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(6427),s=n(8846),r=n(6942),c=n.n(r),i=n(6473),a=n(790);const d=e=>{const{className:t,disabled:n,loading:r,eventName:d,eventProps:l,text:u,onClick:m=()=>{},...h}=e,f=n||r,p=["rfw-app-button",t];let g;return r&&(g=(0,a.jsx)(s.Spinner,{})),u&&(g=(0,a.jsxs)(a.Fragment,{children:[r&&(0,a.jsx)(s.Spinner,{}),u]}),h.icon&&p.push("rfw-app-button--icon-with-text"),"right"===h.iconPosition&&p.push("rfw-app-button--icon-position-right")),(0,a.jsx)(o.Button,{className:c()(...p),disabled:f,"aria-disabled":f,text:g,onClick:(...e)=>{d&&(0,i.VF)(d,l),m(...e)},...h})}},7952:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(7143),s=n(6087),r=n(6520),c=n(9123),i=n(2224);const a=()=>((e,...t)=>{const{invalidateResolution:n}=(0,c.j)(),a=(0,i.A)(t),d=(0,s.useCallback)(()=>{n(e,a)},[n,e,a]);return(0,o.useSelect)(t=>{const{isResolving:n,hasFinishedResolution:o}=t(r.Ui),s=t(r.Ui)[e](...a);return{isResolving:n(e,a),hasFinishedResolution:o(e,a),data:s,invalidateResolution:d}},[d,e,a])})("getSetup")},8242:(e,t,n)=>{n.d(t,{A:()=>l});var o=n(6942),s=n.n(o),r=n(6427),c=n(790);var i=n(8771);const a=({size:e="",...t})=>(0,c.jsx)(r.Card,{...t,size:e});a.Body=e=>{const{className:t,...n}=e;return(0,c.jsx)(r.CardBody,{className:s()("rfw-section-card-body",t),...n})},a.Footer=e=>{const{children:t,...n}=e;return(0,c.jsx)(r.CardFooter,{className:"rfw-section-card-footer",...n,children:t})},a.Title=e=>{const{className:t,...n}=e;return(0,c.jsx)(i.A.Title,{className:s()("rfw-section-card-title",t),...n})};const d=({className:e,title:t,description:n,topContent:o,children:i,disabled:a,disabledLeft:d,verticalGap:l=6})=>{const u=s()("rfw-section",!!a&&"rfw-section--is-disabled",!!d&&"rfw-section--is-disabled-left",e);return(0,c.jsxs)("section",{className:u,children:[(0,c.jsxs)("header",{className:"rfw-section__header",children:[o&&(0,c.jsx)("p",{children:o}),t&&(0,c.jsx)("h1",{children:t}),n]}),(0,c.jsx)(r.Flex,{className:"rfw-section__body",direction:"column",gap:l,children:i})]})};d.Card=a;const l=d},8556:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(7723),s=n(5115),r=n(6701),c=n(790);const i=()=>{const{business_name:e,ad_account_id:t,ad_account_name:n,pixel_id:i}=(0,s.A)(),{email:a}=(0,r.A)();return(0,c.jsxs)("div",{className:"rfw-reddit-account-details",children:[a&&(0,c.jsx)("p",{children:a}),e&&(0,c.jsxs)("p",{children:[(0,o.__)("Business:","reddit-for-woocommerce")," ",e]}),t&&n&&(0,c.jsxs)("p",{children:[(0,o.__)("Ads Account:","reddit-for-woocommerce")," ",n," (",t,")"]}),i&&(0,c.jsxs)("p",{children:[(0,o.__)("Pixel ID:","reddit-for-woocommerce")," ",i]})]})}},8721:(e,t,n)=>{n.d(t,{A:()=>d});var o=n(6087),s=n(7723),r=n(9123),c=n(5640),i=n(3905);const{adminNonce:a}=i.WD,d=()=>{const{invalidateResolution:e}=(0,r.j)(),[t,n]=(0,o.useState)(""),[i,d]=(0,o.useState)(!1),[l,u]=(0,o.useState)(0),{createNotice:m}=(0,c.A)();return{createCatalog:(0,o.useCallback)(async(t=!1)=>{d(!0);const o=await fetch(ajaxurl,{method:"POST",body:new URLSearchParams({action:`${redditAdsAdminData.prefix}create_catalog`,security:a,delete_existing_catalog:t})});if(o.ok){const t=await o.json();d(!1),t.success?(n(t.data.id||""),e("getRedditAccountConfig",[]),m("success",(0,s.__)("Product catalog created successfully.","reddit-for-woocommerce"))):(m("error",(0,s.sprintf)(/* translators: %s is the error message */ /* translators: %s is the error message */
(0,s.__)("Failed to create product catalog: %s","reddit-for-woocommerce"),t.data.message)),u(t.data?.error_code))}else m("error",(0,s.__)("There was an error with the request.","reddit-for-woocommerce")),d(!1)},[m,n,d]),loading:i,createdCatalogId:t,errorCode:l}}},8771:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(6942),s=n.n(o),r=n(790);const c=e=>{const{className:t="",...n}=e;return(0,r.jsx)("div",{className:`rfw-subsection ${t}`,...n})};c.Title=e=>{const{className:t,...n}=e;return(0,r.jsx)("div",{className:s()("rfw-subsection-title",t),...n})},c.Subtitle=e=>{const{className:t,...n}=e;return(0,r.jsx)("div",{className:s()("rfw-subsection-subtitle",t),...n})},c.Body=e=>{const{children:t}=e;return(0,r.jsx)("div",{className:"rfw-subsection-body",children:t})},c.HelperText=e=>{const{className:t,children:n}=e;return(0,r.jsx)("div",{className:s()("rfw-subsection-helper-text",t),children:n})};const i=c},8783:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(5115);const s=()=>{const{business_id:e,business_name:t,hasFinishedResolution:n}=(0,o.A)();return{businessId:e,businessName:t,hasConnection:!!e,hasFinishedResolution:n}}},9180:(e,t,n)=>{n.d(t,{A:()=>i});var o=n(7723),s=n(4236),r=n(7892),c=n(790);const i=({eventContext:e})=>(0,c.jsxs)(r.A,{className:"rfw-help-icon-button",href:"https://woocommerce.com/document/reddit-for-woocommerce/",target:"_blank",eventName:"rfw_help_click",eventProps:{context:e},children:[(0,c.jsx)(s.A,{}),(0,o.__)("Help","reddit-for-woocommerce")]})},9274:(e,t,n)=>{n.d(t,{A:()=>o});const o=function(){const e=document.querySelector("li.wp-has-submenu.menu-top.toplevel_page_woocommerce-marketing");return e?{currentLink:e.querySelector(".wp-submenu > .current > a"),setupLink:document.querySelector('a[href="admin.php?page=wc-admin&path=%2Freddit%2Fsetup"]')}:null}},9370:(e,t,n)=>{n.d(t,{A:()=>s});var o=n(790);const s=e=>{const{className:t="",children:n,...s}=e;return(0,o.jsx)("div",{className:`rfw-step-content ${t}`,...s,children:(0,o.jsx)("div",{className:"rfw-step-content__container",children:n})})}},9457:(e,t,n)=>{n.d(t,{A:()=>a});var o=n(6427),s=n(6942),r=n.n(s),c=n(790);const i={auto:!1,visible:"rwf-app-modal__styled--overflow-visible"},a=({className:e,overflow:t="auto",buttons:n=[],children:s,...a})=>{const d=r()("rfw-admin-page","rfw-app-modal",i[t],e);return(0,c.jsxs)(o.Modal,{className:d,...a,children:[s,n.length>=1&&(0,c.jsx)("div",{className:"rfw-app-modal__footer",children:n})]})}},9826:(e,t,n)=>{n.d(t,{A:()=>r});var o=n(8242),s=n(790);const r=({children:e})=>(0,s.jsx)(o.A,{className:"rfw-step-content-footer",verticalGap:10,children:e})},9851:(e,t,n)=>{n.d(t,{A:()=>ie});var o=n(6701),s=n(7723),r=n(3832),c=n(3905),i=n(6520),a=n(7892),d=n(4856),l=n(5640),u=n(6599),m=n(790);const h=({disabled:e})=>{const{createNotice:t}=(0,l.A)(),n=c.WD?.setupComplete?"reconnect":"setup-reddit",o={next_page_name:n},h=(0,r.addQueryArgs)(`${i.RV}/reddit/connect`,o),[f,{loading:p,data:g}]=(0,u.A)({path:h});return(0,m.jsx)(d.A,{appearance:d.x.REDDIT,disabled:e,description:(0,s.__)("Connect your Reddit Business Account to sync your catalog and launch campaigns.","reddit-for-woocommerce"),indicator:(0,m.jsx)(a.A,{isSecondary:!0,disabled:e,loading:p||g,eventName:"rfw_reddit_account_connect_button_click",eventProps:{context:n},onClick:async()=>{try{const e=await f();window.location.href=e.url}catch(e){t("error",(0,s.__)("Unable to connect your Reddit account. Please try again later.","reddit-for-woocommerce"))}},children:(0,s.__)("Connect","reddit-for-woocommerce")})})};var f=n(6087),p=n(9123),g=n(8556),w=n(7143);const x="getExistingBusinessAccounts",_=()=>(0,w.useSelect)(e=>{const t=e(i.Ui);return{existingAccounts:t[x](),hasFinishedResolution:t.hasFinishedResolution(x,[])}},[]);var v=n(8783);const A="getExistingAdsAccounts",j=()=>{const{hasConnection:e,hasFinishedResolution:t}=(0,v.A)();return(0,w.useSelect)(n=>{if(!e||!t)return{existingAccounts:null,hasFinishedResolution:t};const o=n(i.Ui);return{existingAccounts:o[A](),hasFinishedResolution:o.hasFinishedResolution(A,[])}},[e,t])};var b=n(3849),y=n(679);const C="getExistingPixels",N=()=>{const{hasConnection:e,hasFinishedResolution:t}=(0,v.A)(),{hasConnection:n,hasFinishedResolution:o}=(0,b.A)();return(0,w.useSelect)(s=>{if(!(e&&t&&n&&o))return{existingPixels:null,hasFinishedResolution:t&&o};const r=s(i.Ui);return{existingPixels:r[C](),hasFinishedResolution:r.hasFinishedResolution(C,[])}},[e,t,n,o])},k=()=>{const{upsertAdsAccount:e,upsertBusinessAccount:t,upsertPixelId:n,invalidateResolution:o,fetchSetup:s}=(0,p.j)(),r=(0,f.useRef)(!1),[i,a]=(0,f.useState)(null),[d,l]=(0,f.useState)(!1),u=(()=>{const{hasFinishedResolution:e,hasConnection:t}=(0,b.A)(),{hasFinishedResolution:n,existingAccounts:o}=j();return e&&n?!t&&1===o?.length:null})(),m=(()=>{const{hasFinishedResolution:e,hasConnection:t}=(0,v.A)(),{hasFinishedResolution:n,existingAccounts:o}=_();return e&&n?!t&&1===o?.length:null})(),h=(()=>{const{hasFinishedResolution:e,hasConnection:t}=(0,y.A)(),{hasFinishedResolution:n,existingPixels:o}=N();return e&&n?!t&&1===o?.length:null})(),{existingAccounts:g}=_(),{existingAccounts:w}=j(),{existingPixels:x}=N();return(0,f.useEffect)(()=>{if(null===u||null===m||null===h||r.current)return;let i=null;r.current=!0,u?i=c.A2:m?i=c.iT:h&&(i=c.Gm),a(i),l(!0),i&&(async()=>{if(i===c.Gm){const e=x[0];await n(e)}else if(i===c.A2){const t=w[0];await e(t.ad_account_id,t.ad_account_name),o("getExistingPixels",[])}else if(i===c.iT){const e=g[0];await t(e.business_id,e.business_name),o("getExistingAdsAccounts",[]),o("getExistingPixels",[])}i!==c.Gm&&i!==c.A2&&i!==c.iT||s(),a(null)})()},[n,e,t,h,u,m,g,w,x,o,s]),{hasDetermined:d,connectingWhich:i}};var R=n(8468);const F=({onDisconnected:e=R.noop})=>{const{resetRedditAccountConfig:t}=(0,p.j)(),[n,o]=(0,f.useState)(!1);return(0,m.jsx)(a.A,{isTertiary:!0,loading:n,text:(0,s.__)("Or, connect to a different Ads account","reddit-for-woocommerce"),eventName:"rfw_ads_account_disconnect_button_click",onClick:()=>{o(!0),t(c.HR.ADS).then(()=>e()).catch(()=>o(!1))}})},S=({onDisconnected:e})=>{const{existingAccounts:t}=j(),{hasConnection:n}=(0,b.A)();return!n||t?.length<=1?null:(0,m.jsx)(F,{onDisconnected:e})};var I=n(8846);function E({text:e}){return(0,m.jsxs)("div",{className:"rfw-loading-label",children:[(0,m.jsx)(I.Spinner,{}),e]})}var P=n(6427),B=n(6942),D=n.n(B);const T=e=>{const{options:t=[],className:n,onChange:o=R.noop,value:s,autoSelectFirstOption:r=!1,nonInteractive:c=!1,...i}=e,a=(0,f.useRef)(!0===r);(0,f.useEffect)(()=>{a.current&&void 0===s&&t.length&&(a.current=!1,o(t[0].value))},[s,t,o]);let d={options:t,value:s,onChange:o,...i};const l=r&&1===t?.length||c;return l&&(d={...d,readOnly:!0,suffix:" ",tabIndex:"-1"}),(0,m.jsx)("div",{className:D()("rfw-app-select-control",n,{"rfw-app-select-control--is-non-interactive":l}),children:(0,m.jsx)(P.SelectControl,{...d})})},M=e=>{const{existingAccounts:t}=j(),n=t?.map(e=>({value:e.ad_account_id,label:`${e.ad_account_name} (${e.ad_account_id})`}));return(0,m.jsx)(T,{options:n,autoSelectFirstOption:!0,...e})};var O=n(4566),q=n(8998),L=n(5115);const U=()=>{const[e,t]=(0,f.useState)(),[n,o]=(0,f.useState)(!1),{upsertAdsAccount:r}=(0,p.j)(),{refetchRedditAccountConfig:c}=(0,L.A)(),{existingAccounts:i}=j(),{hasConnection:l,adAccountId:u,hasFinishedResolution:h}=(0,b.A)();(0,f.useEffect)(()=>{l&&t(u)},[u,l]);return(0,m.jsx)(d.A,{className:"rfw-reddit-combo-account-card rfw-reddit-combo-service-account-card--ads",title:(0,s.__)("Connect to existing Reddit Ads account","reddit-for-woocommerce"),alignIndicator:"toDetail",indicator:h?n?(0,m.jsx)(E,{text:(0,s.__)("Connectingâ€¦","reddit-for-woocommerce")}):l?(0,m.jsx)(O.A,{}):(0,m.jsx)(a.A,{isSecondary:!0,disabled:l,eventName:"rfw_ads_account_connect_button_click",onClick:async()=>{if(e){o(!0);try{const t=i?.find(t=>t.ad_account_id===e),n=t?.ad_account_name;await r(e,n),await c()}catch(e){(0,q.h)(e,null,(0,s.__)("Unable to connect your Reddit Ads account. Please try again later.","reddit-for-woocommerce"))}finally{o(!1)}}},children:(0,s.__)("Connect","reddit-for-woocommerce")}):(0,m.jsx)(E,{}),detail:(0,m.jsx)(M,{value:e,onChange:t,autoSelectFirstOption:!0,nonInteractive:l},Boolean(e)),actions:(0,m.jsx)(S,{onDisconnected:()=>{t(void 0)}})})},W=({upsertingAction:e})=>{const t="update"===e;let n=(0,s.__)("Creating a new Reddit Ads account","reddit-for-woocommerce"),o=(0,s.__)("Creatingâ€¦","reddit-for-woocommerce");return t&&(n=(0,s.__)("Connecting your Reddit Ads account","reddit-for-woocommerce"),o=(0,s.__)("Connectingâ€¦","reddit-for-woocommerce")),(0,m.jsx)(d.A,{className:"rfw-reddit-combo-service-account-card--ads",title:n,helper:(0,s.__)("This may take a few moments, please waitâ€¦","reddit-for-woocommerce"),indicator:(0,m.jsx)(E,{text:o})})},V=({upsertingAction:e})=>e?(0,m.jsx)(W,{upsertingAction:e}):(0,m.jsx)(U,{});var $=n(9457),H=n(7792);const z=({text:e=(0,s.__)("Create Business Account","reddit-for-woocommerce"),onClick:t=R.noop,...n})=>{const o=(0,f.useCallback)(()=>{window.open("https://accounts.reddit.com/adsregister","_blank","noopener,noreferrer"),t()},[t]);return(0,m.jsx)(a.A,{text:e,onClick:o,...n})},Y=({onContinue:e,onRequestClose:t})=>(0,m.jsxs)($.A,{className:"rfw-create-business-account-warning-modal",title:(0,s.__)("Create Business Account","reddit-for-woocommerce"),buttons:[(0,m.jsx)(z,{isSecondary:!0,text:(0,s.__)("Yes, I want a new account","reddit-for-woocommerce"),onClick:e},"confirm"),(0,m.jsx)(a.A,{isPrimary:!0,onClick:t,children:(0,s.__)("Cancel","reddit-for-woocommerce")},"cancel")],onRequestClose:t,children:[(0,m.jsxs)("p",{className:"rfw-create-business-account-warning-modal__warning-text",children:[(0,m.jsx)(H.A,{}),(0,m.jsx)("span",{children:(0,s.__)("Are you sure you want to create a new Business account?","reddit-for-woocommerce")})]}),(0,m.jsx)("p",{children:(0,s.__)("You already have another Business account associated with this Reddit account.","reddit-for-woocommerce")})]}),G=({onDisconnected:e=R.noop})=>{const{resetRedditAccountConfig:t}=(0,p.j)(),[n,o]=(0,f.useState)(!1);return(0,m.jsx)(a.A,{isTertiary:!0,loading:n,text:(0,s.__)("Or, connect to a different Business account","reddit-for-woocommerce"),eventName:"rfw_business_account_disconnect_button_click",onClick:()=>{o(!0),t().then(()=>e()).catch(()=>o(!1))}})},J=({isConnected:e,onCreateNewClick:t,onDisconnected:n,disabled:o,...r})=>{const{existingAccounts:c}=_(),{hasConnection:i}=(0,v.A)();if(i&&c?.length>1)return(0,m.jsx)(G,{onDisconnected:n});const d=o||!c?.length;return(0,m.jsx)(a.A,{isTertiary:!0,onClick:t,disabled:d,...r,children:(0,s.__)("Or, create a new Business account","reddit-for-woocommerce")})},Q=e=>{const{existingAccounts:t}=_(),n=t?.map(e=>({value:e.business_id,label:`${e.business_name} (${e.business_id})`}));return(0,m.jsx)(T,{options:n,autoSelectFirstOption:!0,...e})},X=({onCreateClick:e})=>{const[t,n]=(0,f.useState)(),[o,r]=(0,f.useState)(!1),{upsertBusinessAccount:c}=(0,p.j)(),{refetchRedditAccountConfig:i}=(0,L.A)(),{existingAccounts:l}=_(),{hasConnection:u,businessId:h,hasFinishedResolution:g}=(0,v.A)();(0,f.useEffect)(()=>{u&&n(h)},[h,u]);return(0,m.jsx)(d.A,{className:"rfw-reddit-combo-account-card rfw-reddit-combo-service-account-card--business",title:(0,s.__)("Connect to existing Reddit Business account","reddit-for-woocommerce"),alignIndicator:"toDetail",indicator:g?o?(0,m.jsx)(E,{text:(0,s.__)("Connectingâ€¦","reddit-for-woocommerce")}):u?(0,m.jsx)(O.A,{}):(0,m.jsx)(a.A,{isSecondary:!0,disabled:u,eventName:"rfw_ads_account_connect_button_click",onClick:async()=>{if(t){r(!0);try{const e=l?.find(e=>e.business_id===t),n=e?.business_name;await c(t,n),await i()}catch(e){(0,q.h)(e,null,(0,s.__)("Unable to connect your Reddit Business account. Please try again later.","reddit-for-woocommerce"))}finally{r(!1)}}},children:(0,s.__)("Connect","reddit-for-woocommerce")}):(0,m.jsx)(E,{}),detail:(0,m.jsx)(Q,{value:t,onChange:n,autoSelectFirstOption:!0,nonInteractive:u},Boolean(t)),actions:(0,m.jsx)(J,{disabled:o,isConnected:u,onCreateNewClick:e,onDisconnected:()=>{n(void 0)}})})},K=({upsertingAction:e})=>{const t="update"===e;let n=(0,s.__)("Creating a new Reddit Business account","reddit-for-woocommerce"),o=(0,s.__)("Creatingâ€¦","reddit-for-woocommerce");return t&&(n=(0,s.__)("Connecting your Reddit Business account","reddit-for-woocommerce"),o=(0,s.__)("Connectingâ€¦","reddit-for-woocommerce")),(0,m.jsx)(d.A,{className:"rfw-reddit-combo-service-account-card--business",title:n,helper:(0,s.__)("This may take a few moments, please waitâ€¦","reddit-for-woocommerce"),indicator:(0,m.jsx)(E,{text:o})})},Z=({onRequestCreate:e=R.noop,upsertingAction:t})=>{const[n,o]=(0,f.useState)(!1);if(t)return(0,m.jsx)(K,{upsertingAction:t});const s=()=>{o(!1)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(X,{onCreateClick:()=>{o(!0)}}),n&&(0,m.jsx)(Y,{onContinue:()=>{e(),s()},onRequestClose:s})]})};var ee=n(7725);const te=({showSpinner:e})=>{const{hasConnection:t}=(0,v.A)(),{hasConnection:n}=(0,b.A)(),{hasConnection:o}=(0,y.A)();return e?(0,m.jsx)(E,{text:(0,s.__)("Connectingâ€¦","reddit-for-woocommerce")}):t&&n&&o?(0,m.jsx)(O.A,{}):null};var ne=n(6028),oe=n(4932);const se=()=>{const{existingAccounts:e,hasFinishedResolution:t}=_();return!t||e?.length>0?null:(0,m.jsxs)(oe.A,{status:"warning",isDismissible:!1,className:"rfw-reddit-create-business-account-notice",children:[(0,m.jsx)("p",{children:(0,f.createInterpolateElement)((0,s.__)("We couldn't find a Reddit Business Account. Create one, then come back and click <strong>Connect to a different Reddit account</strong> to link it.","reddit-for-woocommerce"),{strong:(0,m.jsx)("strong",{})})}),(0,m.jsx)(z,{isPrimary:!0})]})};var re=n(8258);const ce=()=>{const[e,t]=(0,f.useState)(!1),[n,o]=(0,f.useState)(!1),{upsertAdsAccount:r,fetchSetup:i}=(0,p.j)(),{hasDetermined:l,connectingWhich:u}=k(),{hasConnection:h}=(0,v.A)(),{hasConnection:w}=(0,b.A)(),{existingAccounts:x}=_(),{existingAccounts:A,hasFinishedResolution:y}=j(),{text:C,subText:N}=(e=>{let t=null,n=null;switch(e){case c.A2:t=(0,s.__)("Connecting ads accountâ€¦","reddit-for-woocommerce"),n="";break;case c.iT:t=(0,s.__)("Connecting business accountâ€¦","reddit-for-woocommerce"),n="";break;case c.Gm:t=(0,s.__)("Connecting pixel IDâ€¦","reddit-for-woocommerce"),n=""}return{text:t,subText:n}})(u),R=h||x?.length>0,F=R&&!n&&!u&&(e||!h),S=w||A?.length>0,I=S&&!u&&!n&&(e||!w),E=h&&w;if((0,f.useEffect)(()=>{(async()=>{l&&!w&&1===A?.length&&h&&null===u&&!n&&(o(!0),await r(A[0].ad_account_id,A[0].ad_account_name),i(),o(!1))})()},[l,w,h,A,r,u,n,i]),!l)return(0,m.jsx)(ne.A,{});const P=(0,m.jsx)(ee.A,{isTertiary:!0}),B=Boolean(u)||n||!y&&!w,D=C||(0,m.jsx)(g.A,{});return(0,m.jsxs)("div",{className:"rfw-reddit-combo-account-card-wrapper",children:[(0,m.jsx)(d.A,{appearance:d.x.REDDIT,alignIcon:"top",className:"rfw-reddit-combo-account-card rfw-reddit-combo-account-card--connected rfw-reddit-combo-service-account-card--reddit",description:D,actions:(0,m.jsxs)(m.Fragment,{children:[u||n||!y&&!w?null:e?(0,m.jsxs)("div",{className:"rfw-reddit-combo-account-card__description-actions",children:[P,(0,m.jsx)(a.A,{isTertiary:!0,onClick:()=>{t(!1)},children:(0,s.__)("Cancel","reddit-for-woocommerce")})]}):(0,m.jsx)("div",{className:"rfw-reddit-combo-account-card__description-actions",children:!I&&S||!F&&R?(0,m.jsx)(a.A,{isTertiary:!0,text:(0,s.__)("Edit","reddit-for-woocommerce"),onClick:()=>{t(!0)}}):P}),(0,m.jsx)(se,{})]}),helper:N,indicator:(0,m.jsx)(te,{showSpinner:B}),expandedDetail:!0}),F&&(0,m.jsx)(Z,{}),I&&(0,m.jsx)(V,{}),E&&(0,m.jsx)(re.A,{})]})},ie=({disabled:e=!1})=>{const{isConnected:t}=(0,o.A)();return t?(0,m.jsx)(ce,{}):(0,m.jsx)(h,{disabled:e})}}}]);