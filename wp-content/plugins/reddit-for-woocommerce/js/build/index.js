(()=>{"use strict";var e,t,n={790:e=>{e.exports=window.ReactJSXRuntime},1455:e=>{e.exports=window.wp.apiFetch},1609:e=>{e.exports=window.React},2619:e=>{e.exports=window.wp.hooks},3577:e=>{e.exports=window.wc.number},3832:e=>{e.exports=window.wp.url},3905:(e,t,n)=>{n.d(t,{A2:()=>i,Dh:()=>c,Gm:()=>s,HR:()=>d,WD:()=>r,iT:()=>a,wH:()=>o});const r=window.redditAdsAdminData,o={CONNECTED:"connected",DISCONNECTED:"disconnected"},c={CONNECTED:"connected",DISCONNECTED:"disconnected"},i="connecting_ads",a="connecting_business",s="connecting_pixel_id",d={ADS:"ads",BUSINESS:"business",PIXEL:"pixel"}},4111:e=>{e.exports=window.wc.currency},5573:e=>{e.exports=window.wp.primitives},5703:e=>{e.exports=window.wc.wcSettings},6087:e=>{e.exports=window.wp.element},6427:e=>{e.exports=window.wp.components},6473:(e,t,n)=>{n.d(t,{eB:()=>_,CU:()=>p,qX:()=>l,E$:()=>E,JL:()=>u,VF:()=>g,T:()=>d});var r=n(7143);const o=window.wc.tracks;var c=n(8468),i=n(2619),a=n(3905),s=n(9123);const d=c.noop,u=(0,i.createHooks)(),p="tracking",_="FILTER_BUDGET_RECOMMENDATIONS",E=new Map;function l(e){const{trackingSlug:t}=a.WD,{version:n,adAccountId:o}=(0,r.select)(s.U).getGeneral(),c={...e,[`${t}_version`]:n};return o&&(c[`${t}_ads_id`]=o),c}function g(e,t){(0,o.recordEvent)(e,l(t))}E.set("FILTER_ONBOARDING",["context","step"]),E.set(_,["source","recommended_budget"])},6476:e=>{e.exports=window.wc.navigation},6520:(e,t,n)=>{n.d(t,{RV:()=>o,Ui:()=>r,mY:()=>c});const r="wc/rfw",o="/wc/rfw",c="core/notices"},7143:e=>{e.exports=window.wp.data},7723:e=>{e.exports=window.wp.i18n},8468:e=>{e.exports=window.lodash},8846:e=>{e.exports=window.wc.components},8998:(e,t,n)=>{n.d(t,{h:()=>i});var r=n(7143),o=n(7723),c=n(6520);function i(e,t,n){if(401!==e?.statusCode){const i=function(e,t,n){const r=[],c=e?.message;return t&&r.push(t),c&&"string"==typeof c?r.push(c):n&&r.push(n),0===r.length&&r.push((0,o.__)("Unknown error occurred.","reddit-for-woocommerce")),r.join((0,o._x)(" ","The spacing between sentences. It's a space in English. Please use an empty string if no spacing is needed in that language.","reddit-for-woocommerce"))}(e,t,n);(0,r.dispatch)(c.mY).createNotice("error",i)}console.error(e)}},9123:(e,t,n)=>{n.d(t,{U:()=>s.Ui,j:()=>ie});var r={};n.r(r),n.d(r,{completeSetupAccounts:()=>k,createAdsCampaign:()=>P,disconnectRedditAccount:()=>b,fetchExistingAdsAccounts:()=>x,fetchRedditAccount:()=>v,fetchSetup:()=>y,receiveExistingAdsAccounts:()=>T,receiveExistingBusinessAccounts:()=>A,receiveExistingPixels:()=>I,receiveJetpackAccount:()=>h,receiveRedditAccount:()=>m,receiveRedditAccountConfig:()=>S,receiveSettings:()=>f,receiveSetup:()=>C,receiveTrackConversionsStatus:()=>w,resetRedditAccountConfig:()=>D,updateSettings:()=>N,updateTrackConversionsStatus:()=>R,upsertAdsAccount:()=>V,upsertBusinessAccount:()=>O,upsertPixelId:()=>U});var o={};n.r(o),n.d(o,{getAdsBudgetMetrics:()=>K,getExistingAdsAccounts:()=>M,getExistingBusinessAccounts:()=>J,getExistingPixels:()=>H,getGeneral:()=>L,getJetpackAccount:()=>$,getRedditAccount:()=>G,getRedditAccountConfig:()=>X,getSettings:()=>F,getSetup:()=>B,getTrackConversions:()=>j});var c={};n.r(c),n.d(c,{getExistingAdsAccounts:()=>ee,getExistingBusinessAccounts:()=>te,getExistingPixels:()=>ne,getJetpackAccount:()=>W,getRedditAccount:()=>q,getRedditAccountConfig:()=>z,getSettings:()=>Q,getSetup:()=>Z,getTrackConversions:()=>Y});var i=n(7143),a=n(3905),s=n(6520),d=n(7723),u=n(1455),p=n.n(u),_=n(8998);const E=()=>window.navigator.userAgent.toLowerCase().includes("wc-ios"),l=()=>window.navigator.userAgent.toLowerCase().includes("wc-android"),g={RECEIVE_ACCOUNTS_JETPACK:"RECEIVE_ACCOUNTS_JETPACK",RECEIVE_EXISTING_ADS_ACCOUNTS:"RECEIVE_EXISTING_ADS_ACCOUNTS",RECEIVE_EXISTING_BUSINESS_ACCOUNTS:"RECEIVE_EXISTING_BUSINESS_ACCOUNTS",RECEIVE_EXISTING_PIXELS:"RECEIVE_EXISTING_PIXELS",RECEIVE_REDDIT_ACCOUNT:"RECEIVE_REDDIT_ACCOUNT",RECEIVE_REDDIT_ACCOUNT_CONFIG:"RECEIVE_REDDIT_ACCOUNT_CONFIG",RECEIVE_TRACK_CONVERSIONS_STATUS:"RECEIVE_TRACK_CONVERSIONS_STATUS",RECEIVE_SETUP:"RECEIVE_SETUP",RECEIVE_SETTINGS:"RECEIVE_SETTINGS",DISCONNECT_ACCOUNTS_REDDIT:"DISCONNECT_ACCOUNTS_REDDIT",DISCONNECT_ACCOUNTS_ALL:"DISCONNECT_ACCOUNTS_ALL"};function h(e){return{type:g.RECEIVE_ACCOUNTS_JETPACK,account:e}}function m(e){return{type:g.RECEIVE_REDDIT_ACCOUNT,redditAccount:e}}function w(e){return{type:g.RECEIVE_TRACK_CONVERSIONS_STATUS,status:e}}function C(e){return{type:g.RECEIVE_SETUP,setup:e}}function f(e){return{type:g.RECEIVE_SETTINGS,settings:e}}function S(e){return{type:g.RECEIVE_REDDIT_ACCOUNT_CONFIG,redditAccountConfig:e}}function T(e){return{type:g.RECEIVE_EXISTING_ADS_ACCOUNTS,accounts:e}}function A(e){return{type:g.RECEIVE_EXISTING_BUSINESS_ACCOUNTS,accounts:e}}function I(e){return{type:g.RECEIVE_EXISTING_PIXELS,pixels:e}}async function R(e){try{return await p()({path:`${s.RV}/reddit/settings`,method:"POST",data:{capi_enabled:e}}),w(e)}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error updating the conversions tracking status.","reddit-for-woocommerce")),e}}async function N(e){try{const t=await p()({path:`${s.RV}/reddit/settings`,method:"POST",data:{capi_enabled:e.trackConversions,products_token:e.productsToken}});return f({exportFileUrl:t.export_file_url,lastExportTimeStamp:t.last_export_timestamp,productsToken:t.products_token,trackConversions:Boolean(t.capi_enabled),campaignCreated:Boolean(t.campaign_created),triggerExport:Boolean(t.trigger_export)})}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error updating the settings.","reddit-for-woocommerce")),e}}async function v(){try{const e=await p()({path:`${s.RV}/reddit/connection`});(0,i.dispatch)(s.Ui).receiveRedditAccount(e)}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading Reddit account info.","reddit-for-woocommerce"))}}async function y(){try{const e=await p()({path:`${s.RV}/reddit/setup`});(0,i.dispatch)(s.Ui).receiveSetup(e)}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading Reddit setup.","reddit-for-woocommerce"))}}async function x(){try{const e=await p()({path:`${s.RV}/reddit/ad_accounts`});(0,i.dispatch)(s.Ui).receiveExistingAdsAccounts(e)}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading existing ads accounts.","reddit-for-woocommerce"))}}async function b(e=!1){try{return await p()({path:`${s.RV}/reddit/connection`,method:"DELETE"}),{type:g.DISCONNECT_ACCOUNTS_REDDIT,invalidateRelatedState:e}}catch(e){throw(0,_.h)(e,(0,d.__)("Unable to disconnect your Reddit account.","reddit-for-woocommerce")),e}}async function O(e,t){try{const n=await p()({path:`${s.RV}/reddit/config`,method:"POST",data:{business_id:e,business_name:t}});return await x(),S(n)}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error connecting your business account.","reddit-for-woocommerce")),e}}async function D(e=a.HR.BUSINESS){try{let t={};switch(e){case a.HR.BUSINESS:t={business_id:"",business_name:"",ad_account_id:"",ad_account_name:"",pixel_id:""};break;case a.HR.ADS:t={ad_account_id:"",ad_account_name:"",pixel_id:""};break;case a.HR.PIXEL:t={pixel_id:""}}if(Object.keys(t).length>0)return S(await p()({path:`${s.RV}/reddit/config`,method:"POST",data:t}))}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error disconnecting your account.","reddit-for-woocommerce")),e}}async function V(e,t){try{return S(await p()({path:`${s.RV}/reddit/config`,method:"POST",data:{ad_account_id:e,ad_account_name:t,pixel_id:e}}))}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error connecting your Ad account.","reddit-for-woocommerce")),e}}async function U(e){try{return S(await p()({path:`${s.RV}/reddit/config`,method:"POST",data:{pixel_id:e}}))}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error connecting your Pixel ID.","reddit-for-woocommerce")),e}}async function k(){try{return C(await p()({path:`${s.RV}/reddit/setup/complete`,method:"POST"}))}catch(e){throw(0,_.h)(e,(0,d.__)("There was an error completing your setup. Please try again.","reddit-for-woocommerce")),e}}function*P(e){let t="wc-web";E()?t="wc-ios":l()&&(t="wc-android");try{const n=yield p()({path:`${s.RV}/reddit/campaigns`,method:"POST",data:{amount:e,label:t}});return{type:g.CREATE_ADS_CAMPAIGN,createdCampaign:n}}catch(e){throw(0,_.h)(e),e}}const B=e=>e.setup,$=e=>e.accounts.jetpack,G=e=>e.accounts.reddit,L=e=>e.general,X=e=>e.reddit,j=e=>e.trackConversions,F=e=>e.settings,M=e=>e.accounts.existingAdsAccounts||[],J=e=>e.accounts.existingBusinessAccounts,H=e=>e.accounts.existingPixels,K=e=>e.adsBudgetMetrics;function W(){return async function({dispatch:e}){try{e(h(await p()({path:`${s.RV}/jetpack/connected`})))}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading Jetpack account info.","reddit-for-woocommerce"))}}}function q(){return v}function z(){return async function({dispatch:e}){try{e(S(await p()({path:`${s.RV}/reddit/config`})))}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading Reddit account config info.","reddit-for-woocommerce"))}}}function Y(){return async function({dispatch:e}){try{const t=await p()({path:`${s.RV}/reddit/settings`});e(w(Boolean(t.capi_enabled)))}catch(e){(0,_.h)(e,(0,d.__)("There was an error getting the conversions tracking status.","reddit-for-woocommerce"))}}}function Q(){return async function({dispatch:e}){try{const t=await p()({path:`${s.RV}/reddit/settings`});e(f({exportFileUrl:t.export_file_url,lastExportTimeStamp:t.last_export_timestamp,productsToken:t.products_token,trackConversions:Boolean(t.capi_enabled),campaignCreated:Boolean(t.campaign_created),triggerExport:Boolean(t.trigger_export)}))}catch(e){(0,_.h)(e,(0,d.__)("There was an error fetching settings.","reddit-for-woocommerce"))}}}function Z(){return y}function ee(){return x}function te(){return async function({dispatch:e}){try{e(A(await p()({path:`${s.RV}/reddit/businesses`})))}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading existing business accounts.","reddit-for-woocommerce"))}}}function ne(){return async function({dispatch:e}){try{e(I(await p()({path:`${s.RV}/reddit/pixels`})))}catch(e){(0,_.h)(e,(0,d.__)("There was an error loading existing pixel IDs.","reddit-for-woocommerce"))}}}var re=n(8468);function oe(e,t,n){return function(e,t=""){const n=Object.assign(e.constructor(),e),r=e=>null==e?{}:(0,re.clone)(e);return{setIn(e,o){const c=(e=>t?Array.isArray(t)||Array.isArray(e)?[].concat(t,e):`${t}.${e}`:e)(e);return(0,re.setWith)(n,c,o,r),this},end:()=>n}}(e).setIn(t,n).end()}const ce=(0,i.createReduxStore)(s.Ui,{actions:r,selectors:o,resolvers:c,reducer:(e,t)=>{switch(t.type){case g.RECEIVE_ACCOUNTS_JETPACK:{const{account:n}=t;return oe(e,"accounts.jetpack",n)}case g.RECEIVE_SETUP:{const{setup:n}=t;return oe(e,"setup",n)}case g.RECEIVE_REDDIT_ACCOUNT:{const{redditAccount:n}=t;return oe(e,"accounts.reddit",n)}case g.RECEIVE_REDDIT_ACCOUNT_CONFIG:{const{redditAccountConfig:n}=t;return oe(e,"reddit",n)}case g.RECEIVE_TRACK_CONVERSIONS_STATUS:{const{status:n}=t;return oe(e,"trackConversions",n)}case g.RECEIVE_SETTINGS:{const{settings:n}=t;return oe(e,"settings",n)}case g.DISCONNECT_ACCOUNTS_REDDIT:return oe(e,"accounts.reddit",null);case g.RECEIVE_EXISTING_ADS_ACCOUNTS:{const{accounts:n}=t;return oe(e,"accounts.existingAdsAccounts",n)}case g.RECEIVE_EXISTING_BUSINESS_ACCOUNTS:{const{accounts:n}=t;return oe(e,"accounts.existingBusinessAccounts",n)}case g.RECEIVE_EXISTING_PIXELS:{const{pixels:n}=t;return oe(e,"accounts.existingPixels",n)}case g.DISCONNECT_ACCOUNTS_ALL:default:return e}},initialState:{general:{version:a.WD.pluginVersion,adAccountId:a.WD.adsAccountId},setup:{status:a.WD.status,step:a.WD.step},accounts:{jetpack:null,reddit:null,existingAdsAccounts:[],existingBusinessAccounts:[],existingPixels:[]},reddit:null,trackConversions:null,adsBudgetMetrics:[],settings:{exportFileUrl:"",lastExportTimeStamp:"",productsToken:"",campaignCreated:!1,trackConversions:!1,triggerExport:!1}}});(0,i.register)(ce);const ie=()=>(0,i.useDispatch)(s.Ui)},9491:e=>{e.exports=window.wp.compose}},r={};function o(e){var t=r[e];if(void 0!==t)return t.exports;var c=r[e]={exports:{}};return n[e](c,c.exports,o),c.exports}o.m=n,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce((t,n)=>(o.f[n](e,t),t),[])),o.u=e=>({207:"get-started-page",223:"commons",352:"onboarding",472:"settings"}[e]+".js?ver="+{207:"c4101d93d73910fc6ace",223:"ed53f12187695b7cda8d",352:"4d5d901c1f24d62f8996",472:"2b66897f007de3c0c118"}[e]),o.miniCssF=e=>({352:"onboarding",472:"settings"}[e]+".css?ver="+{352:"4d5d901c1f24d62f8996",472:"2b66897f007de3c0c118"}[e]),o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="reddit-for-woocommerce:",o.l=(n,r,c,i)=>{if(e[n])e[n].push(r);else{var a,s;if(void 0!==c)for(var d=document.getElementsByTagName("script"),u=0;u<d.length;u++){var p=d[u];if(p.getAttribute("src")==n||p.getAttribute("data-webpack")==t+c){a=p;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,o.nc&&a.setAttribute("nonce",o.nc),a.setAttribute("data-webpack",t+c),a.src=n),e[n]=[r];var _=(t,r)=>{a.onerror=a.onload=null,clearTimeout(E);var o=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach(e=>e(r)),t)return t(r)},E=setTimeout(_.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=_.bind(null,a.onerror),a.onload=_.bind(null,a.onload),s&&document.head.appendChild(a)}},o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;o.g.importScripts&&(e=o.g.location+"");var t=o.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=e})(),(()=>{if("undefined"!=typeof document){var e={57:0};o.f.miniCss=(t,n)=>{e[t]?n.push(e[t]):0!==e[t]&&{352:1,472:1}[t]&&n.push(e[t]=(e=>new Promise((t,n)=>{var r=o.miniCssF(e),c=o.p+r;if(((e,t)=>{for(var n=document.getElementsByTagName("link"),r=0;r<n.length;r++){var o=(i=n[r]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var c=document.getElementsByTagName("style");for(r=0;r<c.length;r++){var i;if((o=(i=c[r]).getAttribute("data-href"))===e||o===t)return i}})(r,c))return t();((e,t,n,r,c)=>{var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",o.nc&&(i.nonce=o.nc),i.onerror=i.onload=n=>{if(i.onerror=i.onload=null,"load"===n.type)r();else{var o=n&&n.type,a=n&&n.target&&n.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+a+")");s.name="ChunkLoadError",s.code="CSS_CHUNK_LOAD_FAILED",s.type=o,s.request=a,i.parentNode&&i.parentNode.removeChild(i),c(s)}},i.href=t,document.head.appendChild(i)})(e,c,0,t,n)}))(t).then(()=>{e[t]=0},n=>{throw delete e[t],n}))}}})(),(()=>{var e={57:0};o.f.j=(t,n)=>{var r=o.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var c=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=c);var i=o.p+o.u(t),a=new Error;o.l(i,n=>{if(o.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var c=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+c+": "+i+")",a.name="ChunkLoadError",a.type=c,a.request=i,r[1](a)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,c,[i,a,s]=n,d=0;if(i.some(t=>0!==e[t])){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);s&&s(o)}for(t&&t(n);d<i.length;d++)c=i[d],o.o(e,c)&&e[c]&&e[c][0](),e[c]=0},n=globalThis.webpackChunkreddit_for_woocommerce=globalThis.webpackChunkreddit_for_woocommerce||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var c=o(7723),i=o(6087),a=o(2619),s=o(5703),d=(o(9123),o(9491)),u=o(790);const p=(0,d.createHigherOrderComponent)(e=>t=>(0,u.jsx)("div",{className:"rfw-admin-page",children:(0,u.jsx)(e,{...t})}),"withAdminPageShell");var _=o(6473);const E=(0,i.lazy)(()=>Promise.all([o.e(223),o.e(207)]).then(o.bind(o,9484))),l=(0,i.lazy)(()=>Promise.all([o.e(223),o.e(352)]).then(o.bind(o,5854))),g=(0,i.lazy)(()=>Promise.all([o.e(223),o.e(472)]).then(o.bind(o,5964))),h=new Set,m=(0,s.getSetting)("admin")?.woocommerceTranslation||(0,c.__)("WooCommerce","reddit-for-woocommerce"),w="woocommerce_admin_pages_list";let C=!1;const f=()=>{(0,a.addFilter)(w,"woocommerce/reddit-for-woo/add-page-routes",e=>{const t=[["",m],["/marketing",(0,c.__)("Marketing","reddit-for-woocommerce")],(0,c.__)("Reddit for WooCommerce","reddit-for-woocommerce")],n=[{breadcrumbs:[...t],container:E,path:"/reddit/start",wpOpenMenu:"toplevel_page_woocommerce-marketing"},{breadcrumbs:[...t,(0,c.__)("Setup Reddit","reddit-for-woocommerce")],container:l,path:"/reddit/setup"},{breadcrumbs:[...t,(0,c.__)("Settings","reddit-for-woocommerce")],container:g,path:"/reddit/settings",wpOpenMenu:"toplevel_page_woocommerce-marketing"}];return n.forEach(e=>{e.container=p(e.container);const t=e.path.substring(1).replace(/\//g,"_");h.add(t)}),C=!0,e.concat(n)})},S=()=>(0,a.hasAction)("hookAdded",`woocommerce/woocommerce/watch_${w}`);if((0,a.didFilter)(w)>0&&!S()&&!C){const e=Date.now(),t=setInterval(()=>{if(S())return clearInterval(t),void f();Date.now()-e>3e3&&clearInterval(t)},10)}else f();(0,a.addFilter)("woocommerce_tracks_client_event_properties","woocommerce/reddit-for-woo/add-base-event-properties-to-page-view",(e,t)=>"wcadmin_page_view"===t&&h.has(e.path)?(0,_.qX)(e):e)})();